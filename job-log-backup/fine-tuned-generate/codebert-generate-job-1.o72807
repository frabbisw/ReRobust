######## start ##############
#############################################################################################
Experiment for codebert-refactoring
=============================================================================================
on small dataset, before_refactoring, refactoring type is local_variable_renaming:
11/18/2022 13:29:10 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/local_variable_renaming/before_refactoring/small', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/before_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/before_refactoring/small/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/18/2022 13:29:10 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.dense.bias', 'lm_head.layer_norm.weight', 'lm_head.dense.weight', 'lm_head.bias', 'lm_head.decoder.weight', 'lm_head.layer_norm.bias']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/18/2022 13:29:16 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin
11/18/2022 13:29:29 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/before_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/before_refactoring/small/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/8 [00:00<?, ?it/s] 12%|█▎        | 1/8 [00:23<02:44, 23.48s/it] 25%|██▌       | 2/8 [00:49<02:31, 25.19s/it] 38%|███▊      | 3/8 [01:13<02:03, 24.63s/it] 50%|█████     | 4/8 [01:38<01:38, 24.63s/it] 62%|██████▎   | 5/8 [02:06<01:17, 25.68s/it] 75%|███████▌  | 6/8 [02:31<00:51, 25.74s/it] 88%|████████▊ | 7/8 [02:56<00:25, 25.49s/it]100%|██████████| 8/8 [03:17<00:00, 23.82s/it]100%|██████████| 8/8 [03:17<00:00, 24.63s/it]
11/18/2022 13:32:46 - INFO - __main__ -     bleu-4 = 80.5 
11/18/2022 13:32:46 - INFO - __main__ -     xMatch = 13.1474 
11/18/2022 13:32:46 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 13.15 , BLEU: 80.5
CodeBLEU: 80.56
ngram_match_score: 80.56 , weighted_ngram_match_score: 83.87 , syntax_match_score: 83.25 , dataflow_match_score: 74.62
---------------------------------------------------------------------------------------------
on small dataset, after_refactoring, refactoring type is local_variable_renaming:
11/18/2022 13:32:49 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/local_variable_renaming/after_refactoring/small', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/after_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/after_refactoring/small/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/18/2022 13:32:49 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.dense.bias', 'lm_head.decoder.weight', 'lm_head.bias', 'lm_head.layer_norm.bias', 'lm_head.layer_norm.weight', 'lm_head.dense.weight']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/18/2022 13:32:52 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin
11/18/2022 13:32:56 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/after_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/after_refactoring/small/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/8 [00:00<?, ?it/s] 12%|█▎        | 1/8 [00:23<02:45, 23.59s/it] 25%|██▌       | 2/8 [00:49<02:31, 25.18s/it] 38%|███▊      | 3/8 [01:15<02:06, 25.32s/it] 50%|█████     | 4/8 [01:39<01:40, 25.04s/it] 62%|██████▎   | 5/8 [02:06<01:16, 25.56s/it] 75%|███████▌  | 6/8 [02:31<00:50, 25.25s/it] 88%|████████▊ | 7/8 [02:55<00:24, 24.87s/it]100%|██████████| 8/8 [03:16<00:00, 23.64s/it]100%|██████████| 8/8 [03:16<00:00, 24.52s/it]
11/18/2022 13:36:13 - INFO - __main__ -     bleu-4 = 79.24 
11/18/2022 13:36:13 - INFO - __main__ -     xMatch = 9.9602 
11/18/2022 13:36:13 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 9.96 , BLEU: 79.24
CodeBLEU: 79.84
ngram_match_score: 79.84 , weighted_ngram_match_score: 82.72 , syntax_match_score: 82.35 , dataflow_match_score: 75.05
---------------------------------------------------------------------------------------------
on medium dataset, before_refactoring, refactoring type is local_variable_renaming:
11/18/2022 13:36:16 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/local_variable_renaming/before_refactoring/medium', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/before_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/before_refactoring/medium/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/18/2022 13:36:16 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.dense.weight', 'lm_head.bias', 'lm_head.dense.bias', 'lm_head.layer_norm.bias', 'lm_head.decoder.weight', 'lm_head.layer_norm.weight']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/18/2022 13:36:19 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin
11/18/2022 13:36:28 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/before_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/before_refactoring/medium/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/35 [00:00<?, ?it/s]  3%|▎         | 1/35 [00:57<32:22, 57.12s/it]  6%|▌         | 2/35 [01:50<30:08, 54.79s/it]  9%|▊         | 3/35 [02:47<29:47, 55.85s/it] 11%|█▏        | 4/35 [03:46<29:33, 57.21s/it] 14%|█▍        | 5/35 [04:41<28:08, 56.29s/it] 17%|█▋        | 6/35 [05:35<26:47, 55.43s/it] 20%|██        | 7/35 [06:24<24:52, 53.31s/it] 23%|██▎       | 8/35 [07:16<23:54, 53.14s/it] 26%|██▌       | 9/35 [08:12<23:24, 54.03s/it] 29%|██▊       | 10/35 [09:12<23:17, 55.92s/it] 31%|███▏      | 11/35 [10:08<22:16, 55.68s/it] 34%|███▍      | 12/35 [11:02<21:13, 55.36s/it] 37%|███▋      | 13/35 [12:01<20:42, 56.48s/it] 40%|████      | 14/35 [12:58<19:50, 56.70s/it] 43%|████▎     | 15/35 [13:50<18:19, 54.99s/it] 46%|████▌     | 16/35 [14:50<17:54, 56.54s/it] 49%|████▊     | 17/35 [15:43<16:39, 55.51s/it] 51%|█████▏    | 18/35 [16:35<15:26, 54.52s/it] 54%|█████▍    | 19/35 [17:27<14:20, 53.76s/it] 57%|█████▋    | 20/35 [18:19<13:17, 53.19s/it] 60%|██████    | 21/35 [19:22<13:05, 56.13s/it] 63%|██████▎   | 22/35 [20:32<13:02, 60.22s/it] 66%|██████▌   | 23/35 [21:28<11:50, 59.20s/it] 69%|██████▊   | 24/35 [22:21<10:29, 57.22s/it] 71%|███████▏  | 25/35 [23:16<09:26, 56.64s/it] 74%|███████▍  | 26/35 [24:11<08:24, 56.04s/it] 77%|███████▋  | 27/35 [24:57<07:04, 53.10s/it] 80%|████████  | 28/35 [25:54<06:20, 54.31s/it] 83%|████████▎ | 29/35 [26:46<05:21, 53.58s/it] 86%|████████▌ | 30/35 [27:39<04:26, 53.37s/it] 89%|████████▊ | 31/35 [28:32<03:33, 53.29s/it] 91%|█████████▏| 32/35 [29:27<02:41, 53.84s/it] 94%|█████████▍| 33/35 [30:21<01:47, 53.70s/it] 97%|█████████▋| 34/35 [31:17<00:54, 54.58s/it]100%|██████████| 35/35 [31:35<00:00, 43.66s/it]100%|██████████| 35/35 [31:35<00:00, 54.17s/it]
11/18/2022 14:08:07 - INFO - __main__ -     bleu-4 = 90.15 
11/18/2022 14:08:07 - INFO - __main__ -     xMatch = 9.0082 
11/18/2022 14:08:07 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 9.01 , BLEU: 90.15
CodeBLEU: 87.11
ngram_match_score: 87.11 , weighted_ngram_match_score: 90.22 , syntax_match_score: 88.95 , dataflow_match_score: 79.13
---------------------------------------------------------------------------------------------
on medium dataset, after_refactoring, refactoring type is local_variable_renaming:
11/18/2022 14:08:15 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/local_variable_renaming/after_refactoring/medium', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/after_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/after_refactoring/medium/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/18/2022 14:08:16 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.bias', 'lm_head.layer_norm.bias', 'lm_head.layer_norm.weight', 'lm_head.dense.weight', 'lm_head.dense.bias', 'lm_head.decoder.weight']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/18/2022 14:08:19 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin
11/18/2022 14:08:22 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/after_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/local_variable_renaming/after_refactoring/medium/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/35 [00:00<?, ?it/s]  3%|▎         | 1/35 [00:58<33:02, 58.30s/it]  6%|▌         | 2/35 [01:51<30:25, 55.31s/it]  9%|▊         | 3/35 [02:48<29:57, 56.17s/it] 11%|█▏        | 4/35 [03:47<29:29, 57.07s/it] 14%|█▍        | 5/35 [04:44<28:32, 57.09s/it] 17%|█▋        | 6/35 [05:39<27:18, 56.49s/it] 20%|██        | 7/35 [06:29<25:18, 54.23s/it] 23%|██▎       | 8/35 [07:22<24:13, 53.85s/it] 26%|██▌       | 9/35 [08:20<23:54, 55.19s/it] 29%|██▊       | 10/35 [09:20<23:37, 56.69s/it] 31%|███▏      | 11/35 [10:16<22:39, 56.64s/it] 34%|███▍      | 12/35 [11:12<21:34, 56.30s/it] 37%|███▋      | 13/35 [12:13<21:07, 57.60s/it] 40%|████      | 14/35 [13:11<20:17, 57.99s/it] 43%|████▎     | 15/35 [14:03<18:38, 55.92s/it] 46%|████▌     | 16/35 [15:04<18:12, 57.51s/it] 49%|████▊     | 17/35 [15:58<16:55, 56.40s/it] 51%|█████▏    | 18/35 [16:51<15:42, 55.43s/it] 54%|█████▍    | 19/35 [17:44<14:35, 54.72s/it] 57%|█████▋    | 20/35 [18:37<13:32, 54.19s/it] 60%|██████    | 21/35 [19:40<13:15, 56.85s/it] 63%|██████▎   | 22/35 [20:38<12:24, 57.26s/it] 66%|██████▌   | 23/35 [21:33<11:17, 56.45s/it] 69%|██████▊   | 24/35 [22:26<10:10, 55.46s/it] 71%|███████▏  | 25/35 [23:21<09:15, 55.53s/it] 74%|███████▍  | 26/35 [24:19<08:24, 56.11s/it] 77%|███████▋  | 27/35 [25:06<07:06, 53.30s/it] 80%|████████  | 28/35 [26:03<06:20, 54.36s/it] 83%|████████▎ | 29/35 [26:55<05:21, 53.67s/it] 86%|████████▌ | 30/35 [27:48<04:27, 53.48s/it] 89%|████████▊ | 31/35 [28:42<03:34, 53.66s/it] 91%|█████████▏| 32/35 [29:38<02:42, 54.33s/it] 94%|█████████▍| 33/35 [30:33<01:49, 54.61s/it] 97%|█████████▋| 34/35 [31:30<00:55, 55.51s/it]100%|██████████| 35/35 [31:49<00:00, 44.39s/it]100%|██████████| 35/35 [31:49<00:00, 54.55s/it]
11/18/2022 14:40:14 - INFO - __main__ -     bleu-4 = 89.84 
11/18/2022 14:40:14 - INFO - __main__ -     xMatch = 5.8235 
11/18/2022 14:40:14 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 5.82 , BLEU: 89.84
CodeBLEU: 86.82
ngram_match_score: 86.82 , weighted_ngram_match_score: 89.92 , syntax_match_score: 88.77 , dataflow_match_score: 78.73
---------------------------------------------------------------------------------------------
on small dataset, before_refactoring, refactoring type is method_renaming:
11/18/2022 14:40:23 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/method_renaming/before_refactoring/small', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/before_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/before_refactoring/small/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/18/2022 14:40:24 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.decoder.weight', 'lm_head.layer_norm.weight', 'lm_head.dense.weight', 'lm_head.layer_norm.bias', 'lm_head.dense.bias', 'lm_head.bias']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/18/2022 14:40:26 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin
11/18/2022 14:40:30 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/before_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/before_refactoring/small/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/178 [00:00<?, ?it/s]  1%|          | 1/178 [00:23<1:09:42, 23.63s/it]  1%|          | 2/178 [00:48<1:11:03, 24.22s/it]  2%|▏         | 3/178 [01:17<1:17:20, 26.52s/it]  2%|▏         | 4/178 [01:43<1:16:05, 26.24s/it]  3%|▎         | 5/178 [02:07<1:13:21, 25.44s/it]  3%|▎         | 6/178 [02:28<1:08:34, 23.92s/it]  4%|▍         | 7/178 [02:57<1:12:48, 25.55s/it]  4%|▍         | 8/178 [03:21<1:11:30, 25.24s/it]  5%|▌         | 9/178 [03:48<1:12:40, 25.80s/it]  6%|▌         | 10/178 [04:09<1:07:50, 24.23s/it]  6%|▌         | 11/178 [04:32<1:06:43, 23.97s/it]  7%|▋         | 12/178 [04:56<1:06:17, 23.96s/it]  7%|▋         | 13/178 [05:21<1:06:38, 24.24s/it]  8%|▊         | 14/178 [05:47<1:07:12, 24.59s/it]  8%|▊         | 15/178 [06:14<1:09:21, 25.53s/it]  9%|▉         | 16/178 [06:38<1:07:05, 24.85s/it] 10%|▉         | 17/178 [07:06<1:09:15, 25.81s/it] 10%|█         | 18/178 [07:33<1:10:22, 26.39s/it] 11%|█         | 19/178 [07:56<1:06:54, 25.25s/it] 11%|█         | 20/178 [08:22<1:07:17, 25.56s/it] 12%|█▏        | 21/178 [08:43<1:02:51, 24.02s/it] 12%|█▏        | 22/178 [09:08<1:03:33, 24.45s/it] 13%|█▎        | 23/178 [09:32<1:02:20, 24.13s/it] 13%|█▎        | 24/178 [09:59<1:04:16, 25.04s/it] 14%|█▍        | 25/178 [10:28<1:06:49, 26.21s/it] 15%|█▍        | 26/178 [10:50<1:03:07, 24.92s/it] 15%|█▌        | 27/178 [11:12<1:00:31, 24.05s/it] 16%|█▌        | 28/178 [11:34<58:55, 23.57s/it]   16%|█▋        | 29/178 [12:04<1:03:08, 25.43s/it] 17%|█▋        | 30/178 [12:26<1:00:13, 24.42s/it] 17%|█▋        | 31/178 [12:51<1:00:12, 24.57s/it] 18%|█▊        | 32/178 [13:15<59:22, 24.40s/it]   19%|█▊        | 33/178 [13:37<57:11, 23.66s/it] 19%|█▉        | 34/178 [14:01<57:16, 23.87s/it] 20%|█▉        | 35/178 [14:27<58:16, 24.45s/it] 20%|██        | 36/178 [14:51<57:45, 24.41s/it] 21%|██        | 37/178 [15:15<57:12, 24.35s/it] 21%|██▏       | 38/178 [15:42<58:03, 24.88s/it] 22%|██▏       | 39/178 [16:07<58:15, 25.15s/it] 22%|██▏       | 40/178 [16:29<55:39, 24.20s/it] 23%|██▎       | 41/178 [16:55<56:22, 24.69s/it] 24%|██▎       | 42/178 [17:21<56:54, 25.11s/it] 24%|██▍       | 43/178 [17:46<55:57, 24.87s/it] 25%|██▍       | 44/178 [18:13<57:09, 25.59s/it] 25%|██▌       | 45/178 [18:42<58:59, 26.61s/it] 26%|██▌       | 46/178 [19:05<56:33, 25.71s/it] 26%|██▋       | 47/178 [19:32<56:39, 25.95s/it] 27%|██▋       | 48/178 [20:00<57:38, 26.60s/it] 28%|██▊       | 49/178 [20:22<54:28, 25.34s/it] 28%|██▊       | 50/178 [20:46<52:37, 24.67s/it] 29%|██▊       | 51/178 [21:11<52:33, 24.83s/it] 29%|██▉       | 52/178 [21:35<52:06, 24.81s/it] 30%|██▉       | 53/178 [21:59<51:02, 24.50s/it] 30%|███       | 54/178 [22:28<53:26, 25.86s/it] 31%|███       | 55/178 [22:51<51:05, 24.93s/it] 31%|███▏      | 56/178 [23:16<50:39, 24.91s/it] 32%|███▏      | 57/178 [23:43<51:42, 25.64s/it] 33%|███▎      | 58/178 [24:09<51:23, 25.70s/it] 33%|███▎      | 59/178 [24:40<54:00, 27.23s/it] 34%|███▎      | 60/178 [25:05<52:15, 26.57s/it] 34%|███▍      | 61/178 [25:27<48:57, 25.10s/it] 35%|███▍      | 62/178 [25:55<50:19, 26.03s/it] 35%|███▌      | 63/178 [26:22<50:31, 26.36s/it] 36%|███▌      | 64/178 [26:44<47:53, 25.20s/it] 37%|███▋      | 65/178 [27:09<47:10, 25.05s/it] 37%|███▋      | 66/178 [27:35<47:00, 25.19s/it] 38%|███▊      | 67/178 [28:05<49:32, 26.78s/it] 38%|███▊      | 68/178 [28:29<47:16, 25.79s/it] 39%|███▉      | 69/178 [28:47<42:56, 23.64s/it] 39%|███▉      | 70/178 [29:13<43:34, 24.21s/it] 40%|███▉      | 71/178 [29:38<43:36, 24.46s/it] 40%|████      | 72/178 [30:04<44:12, 25.02s/it] 41%|████      | 73/178 [30:27<42:35, 24.34s/it] 42%|████▏     | 74/178 [30:52<42:29, 24.51s/it] 42%|████▏     | 75/178 [31:16<41:44, 24.32s/it] 43%|████▎     | 76/178 [31:40<41:32, 24.43s/it] 43%|████▎     | 77/178 [32:06<41:53, 24.89s/it] 44%|████▍     | 78/178 [32:28<39:44, 23.84s/it] 44%|████▍     | 79/178 [32:55<41:12, 24.98s/it] 45%|████▍     | 80/178 [33:22<41:47, 25.58s/it] 46%|████▌     | 81/178 [33:53<43:49, 27.11s/it] 46%|████▌     | 82/178 [34:21<43:33, 27.22s/it] 47%|████▋     | 83/178 [34:46<42:12, 26.66s/it] 47%|████▋     | 84/178 [35:10<40:43, 26.00s/it] 48%|████▊     | 85/178 [35:35<39:40, 25.60s/it] 48%|████▊     | 86/178 [36:03<40:11, 26.21s/it] 49%|████▉     | 87/178 [36:31<40:37, 26.78s/it] 49%|████▉     | 88/178 [37:00<41:19, 27.55s/it] 50%|█████     | 89/178 [37:27<40:31, 27.31s/it] 51%|█████     | 90/178 [37:52<39:12, 26.74s/it] 51%|█████     | 91/178 [38:16<37:29, 25.85s/it] 52%|█████▏    | 92/178 [38:41<36:53, 25.74s/it] 52%|█████▏    | 93/178 [39:06<35:45, 25.24s/it] 53%|█████▎    | 94/178 [39:29<34:32, 24.67s/it] 53%|█████▎    | 95/178 [39:53<33:42, 24.37s/it] 54%|█████▍    | 96/178 [40:16<32:47, 23.99s/it] 54%|█████▍    | 97/178 [40:43<33:40, 24.94s/it] 55%|█████▌    | 98/178 [41:07<32:50, 24.64s/it] 56%|█████▌    | 99/178 [41:39<35:32, 26.99s/it] 56%|█████▌    | 100/178 [42:08<35:37, 27.41s/it] 57%|█████▋    | 101/178 [42:39<36:41, 28.59s/it] 57%|█████▋    | 102/178 [43:06<35:48, 28.27s/it] 58%|█████▊    | 103/178 [43:33<34:36, 27.68s/it] 58%|█████▊    | 104/178 [44:04<35:26, 28.74s/it] 59%|█████▉    | 105/178 [44:35<35:42, 29.34s/it] 60%|█████▉    | 106/178 [45:05<35:34, 29.64s/it] 60%|██████    | 107/178 [45:33<34:30, 29.16s/it] 61%|██████    | 108/178 [46:00<33:18, 28.55s/it] 61%|██████    | 109/178 [46:30<33:15, 28.91s/it] 62%|██████▏   | 110/178 [46:57<32:00, 28.24s/it] 62%|██████▏   | 111/178 [47:21<30:21, 27.19s/it] 63%|██████▎   | 112/178 [47:48<29:45, 27.05s/it] 63%|██████▎   | 113/178 [48:13<28:27, 26.27s/it] 64%|██████▍   | 114/178 [48:42<29:09, 27.34s/it] 65%|██████▍   | 115/178 [49:07<27:41, 26.37s/it] 65%|██████▌   | 116/178 [49:31<26:39, 25.80s/it] 66%|██████▌   | 117/178 [50:00<27:03, 26.62s/it] 66%|██████▋   | 118/178 [50:26<26:33, 26.55s/it] 67%|██████▋   | 119/178 [50:56<27:06, 27.56s/it] 67%|██████▋   | 120/178 [51:25<27:07, 28.06s/it] 68%|██████▊   | 121/178 [51:47<24:55, 26.25s/it] 69%|██████▊   | 122/178 [52:14<24:38, 26.40s/it] 69%|██████▉   | 123/178 [52:42<24:43, 26.98s/it] 70%|██████▉   | 124/178 [53:15<25:45, 28.62s/it] 70%|███████   | 125/178 [53:41<24:33, 27.81s/it] 71%|███████   | 126/178 [54:09<24:21, 28.11s/it] 71%|███████▏  | 127/178 [54:35<23:13, 27.32s/it] 72%|███████▏  | 128/178 [55:01<22:31, 27.03s/it] 72%|███████▏  | 129/178 [55:26<21:38, 26.50s/it] 73%|███████▎  | 130/178 [55:51<20:40, 25.84s/it] 74%|███████▎  | 131/178 [56:19<20:42, 26.44s/it] 74%|███████▍  | 132/178 [56:40<19:08, 24.97s/it] 75%|███████▍  | 133/178 [57:05<18:41, 24.93s/it] 75%|███████▌  | 134/178 [57:35<19:21, 26.39s/it] 76%|███████▌  | 135/178 [58:00<18:35, 25.93s/it] 76%|███████▋  | 136/178 [58:25<18:05, 25.83s/it] 77%|███████▋  | 137/178 [58:51<17:42, 25.91s/it] 78%|███████▊  | 138/178 [59:15<16:47, 25.18s/it] 78%|███████▊  | 139/178 [59:45<17:16, 26.58s/it] 79%|███████▊  | 140/178 [1:00:09<16:27, 25.97s/it] 79%|███████▉  | 141/178 [1:00:33<15:37, 25.35s/it] 80%|███████▉  | 142/178 [1:01:00<15:29, 25.82s/it] 80%|████████  | 143/178 [1:01:28<15:22, 26.35s/it] 81%|████████  | 144/178 [1:01:49<14:10, 25.01s/it] 81%|████████▏ | 145/178 [1:02:14<13:39, 24.82s/it] 82%|████████▏ | 146/178 [1:02:37<13:01, 24.41s/it] 83%|████████▎ | 147/178 [1:03:00<12:16, 23.74s/it] 83%|████████▎ | 148/178 [1:03:27<12:28, 24.96s/it] 84%|████████▎ | 149/178 [1:03:49<11:36, 24.03s/it] 84%|████████▍ | 150/178 [1:04:18<11:56, 25.58s/it] 85%|████████▍ | 151/178 [1:04:48<12:00, 26.67s/it] 85%|████████▌ | 152/178 [1:05:15<11:39, 26.91s/it] 86%|████████▌ | 153/178 [1:05:41<11:05, 26.62s/it] 87%|████████▋ | 154/178 [1:06:07<10:37, 26.56s/it] 87%|████████▋ | 155/178 [1:06:33<10:02, 26.19s/it] 88%|████████▊ | 156/178 [1:07:03<10:04, 27.47s/it] 88%|████████▊ | 157/178 [1:07:30<09:34, 27.37s/it] 89%|████████▉ | 158/178 [1:08:02<09:31, 28.56s/it] 89%|████████▉ | 159/178 [1:08:28<08:52, 28.01s/it] 90%|████████▉ | 160/178 [1:08:53<08:07, 27.06s/it] 90%|█████████ | 161/178 [1:09:22<07:47, 27.52s/it] 91%|█████████ | 162/178 [1:09:51<07:26, 27.91s/it] 92%|█████████▏| 163/178 [1:10:16<06:47, 27.20s/it] 92%|█████████▏| 164/178 [1:10:43<06:17, 26.96s/it] 93%|█████████▎| 165/178 [1:11:09<05:46, 26.67s/it] 93%|█████████▎| 166/178 [1:11:33<05:11, 25.94s/it] 94%|█████████▍| 167/178 [1:12:05<05:04, 27.69s/it] 94%|█████████▍| 168/178 [1:12:26<04:16, 25.66s/it] 95%|█████████▍| 169/178 [1:12:52<03:51, 25.76s/it] 96%|█████████▌| 170/178 [1:13:15<03:21, 25.22s/it] 96%|█████████▌| 171/178 [1:13:41<02:56, 25.25s/it] 97%|█████████▋| 172/178 [1:14:10<02:38, 26.37s/it] 97%|█████████▋| 173/178 [1:14:33<02:07, 25.57s/it] 98%|█████████▊| 174/178 [1:14:59<01:42, 25.69s/it] 98%|█████████▊| 175/178 [1:15:24<01:16, 25.34s/it] 99%|█████████▉| 176/178 [1:15:48<00:49, 24.97s/it] 99%|█████████▉| 177/178 [1:16:12<00:24, 24.63s/it]100%|██████████| 178/178 [1:16:20<00:00, 19.61s/it]100%|██████████| 178/178 [1:16:20<00:00, 25.73s/it]
11/18/2022 15:56:58 - INFO - __main__ -     bleu-4 = 79.87 
11/18/2022 15:56:58 - INFO - __main__ -     xMatch = 16.7607 
11/18/2022 15:56:58 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 16.76 , BLEU: 79.87
CodeBLEU: 80.55
ngram_match_score: 80.55 , weighted_ngram_match_score: 80.75 , syntax_match_score: 82.44 , dataflow_match_score: 79.12
---------------------------------------------------------------------------------------------
on small dataset, after_refactoring, refactoring type is method_renaming:
11/18/2022 15:57:13 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/method_renaming/after_refactoring/small', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/after_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/after_refactoring/small/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/18/2022 15:57:14 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.layer_norm.weight', 'lm_head.dense.bias', 'lm_head.dense.weight', 'lm_head.bias', 'lm_head.layer_norm.bias', 'lm_head.decoder.weight']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/18/2022 15:57:17 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin
11/18/2022 15:57:20 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/after_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/after_refactoring/small/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/178 [00:00<?, ?it/s]  1%|          | 1/178 [00:23<1:09:29, 23.55s/it]  1%|          | 2/178 [00:48<1:11:22, 24.33s/it]  2%|▏         | 3/178 [01:19<1:19:26, 27.24s/it]  2%|▏         | 4/178 [01:45<1:17:53, 26.86s/it]  3%|▎         | 5/178 [02:10<1:15:11, 26.08s/it]  3%|▎         | 6/178 [02:31<1:10:06, 24.46s/it]  4%|▍         | 7/178 [03:01<1:14:29, 26.14s/it]  4%|▍         | 8/178 [03:26<1:13:15, 25.86s/it]  5%|▌         | 9/178 [03:54<1:14:31, 26.46s/it]  6%|▌         | 10/178 [04:15<1:09:19, 24.76s/it]  6%|▌         | 11/178 [04:39<1:08:41, 24.68s/it]  7%|▋         | 12/178 [05:03<1:07:31, 24.41s/it]  7%|▋         | 13/178 [05:28<1:08:04, 24.75s/it]  8%|▊         | 14/178 [05:54<1:08:46, 25.16s/it]  8%|▊         | 15/178 [06:24<1:11:37, 26.36s/it]  9%|▉         | 16/178 [06:47<1:08:55, 25.53s/it] 10%|▉         | 17/178 [07:17<1:11:56, 26.81s/it] 10%|█         | 18/178 [07:46<1:13:31, 27.57s/it] 11%|█         | 19/178 [08:09<1:09:23, 26.18s/it] 11%|█         | 20/178 [08:36<1:09:41, 26.46s/it] 12%|█▏        | 21/178 [08:57<1:04:54, 24.81s/it] 12%|█▏        | 22/178 [09:23<1:04:57, 24.98s/it] 13%|█▎        | 23/178 [09:47<1:03:58, 24.77s/it] 13%|█▎        | 24/178 [10:15<1:05:52, 25.66s/it] 14%|█▍        | 25/178 [10:45<1:09:09, 27.12s/it] 15%|█▍        | 26/178 [11:08<1:05:17, 25.77s/it] 15%|█▌        | 27/178 [11:32<1:03:23, 25.19s/it] 16%|█▌        | 28/178 [11:54<1:00:58, 24.39s/it] 16%|█▋        | 29/178 [12:26<1:06:16, 26.69s/it] 17%|█▋        | 30/178 [12:50<1:03:50, 25.88s/it] 17%|█▋        | 31/178 [13:15<1:02:24, 25.47s/it] 18%|█▊        | 32/178 [13:40<1:01:25, 25.24s/it] 19%|█▊        | 33/178 [14:02<59:12, 24.50s/it]   19%|█▉        | 34/178 [14:27<59:11, 24.66s/it] 20%|█▉        | 35/178 [14:54<59:58, 25.16s/it] 20%|██        | 36/178 [15:19<59:39, 25.21s/it] 21%|██        | 37/178 [15:45<59:32, 25.33s/it] 21%|██▏       | 38/178 [16:11<1:00:02, 25.73s/it] 22%|██▏       | 39/178 [16:37<59:32, 25.70s/it]   22%|██▏       | 40/178 [16:59<56:52, 24.73s/it] 23%|██▎       | 41/178 [17:26<57:48, 25.32s/it] 24%|██▎       | 42/178 [17:53<58:11, 25.68s/it] 24%|██▍       | 43/178 [18:18<57:20, 25.48s/it] 25%|██▍       | 44/178 [18:45<57:54, 25.93s/it] 25%|██▌       | 45/178 [19:13<59:14, 26.72s/it] 26%|██▌       | 46/178 [19:36<55:55, 25.42s/it] 26%|██▋       | 47/178 [20:02<56:30, 25.88s/it] 27%|██▋       | 48/178 [20:31<57:34, 26.57s/it] 28%|██▊       | 49/178 [20:53<54:09, 25.19s/it] 28%|██▊       | 50/178 [21:16<52:19, 24.53s/it] 29%|██▊       | 51/178 [21:41<52:24, 24.76s/it] 29%|██▉       | 52/178 [22:06<51:58, 24.75s/it] 30%|██▉       | 53/178 [22:30<51:06, 24.53s/it] 30%|███       | 54/178 [22:58<52:46, 25.54s/it] 31%|███       | 55/178 [23:20<50:29, 24.63s/it] 31%|███▏      | 56/178 [23:44<49:52, 24.53s/it] 32%|███▏      | 57/178 [24:12<51:39, 25.62s/it] 33%|███▎      | 58/178 [24:37<50:42, 25.35s/it] 33%|███▎      | 59/178 [25:08<53:23, 26.92s/it] 34%|███▎      | 60/178 [25:33<51:55, 26.40s/it] 34%|███▍      | 61/178 [25:55<49:00, 25.13s/it] 35%|███▍      | 62/178 [26:24<50:47, 26.27s/it] 35%|███▌      | 63/178 [26:51<50:27, 26.33s/it] 36%|███▌      | 64/178 [27:13<47:47, 25.15s/it] 37%|███▋      | 65/178 [27:37<46:56, 24.92s/it] 37%|███▋      | 66/178 [28:04<47:35, 25.50s/it] 38%|███▊      | 67/178 [28:35<50:13, 27.14s/it] 38%|███▊      | 68/178 [28:58<47:29, 25.91s/it] 39%|███▉      | 69/178 [29:17<43:00, 23.68s/it] 39%|███▉      | 70/178 [29:42<43:24, 24.12s/it] 40%|███▉      | 71/178 [30:06<43:02, 24.13s/it] 40%|████      | 72/178 [30:32<43:29, 24.62s/it] 41%|████      | 73/178 [30:54<41:36, 23.78s/it] 42%|████▏     | 74/178 [31:18<41:39, 24.03s/it] 42%|████▏     | 75/178 [31:42<41:01, 23.90s/it] 43%|████▎     | 76/178 [32:07<41:05, 24.17s/it] 43%|████▎     | 77/178 [32:32<41:07, 24.43s/it] 44%|████▍     | 78/178 [32:53<38:59, 23.40s/it] 44%|████▍     | 79/178 [33:19<40:20, 24.45s/it] 45%|████▍     | 80/178 [33:46<40:59, 25.10s/it] 46%|████▌     | 81/178 [34:17<43:28, 26.89s/it] 46%|████▌     | 82/178 [34:45<43:25, 27.14s/it] 47%|████▋     | 83/178 [35:10<42:06, 26.60s/it] 47%|████▋     | 84/178 [35:34<40:29, 25.85s/it] 48%|████▊     | 85/178 [36:00<39:55, 25.75s/it] 48%|████▊     | 86/178 [36:26<39:34, 25.81s/it] 49%|████▉     | 87/178 [36:55<40:29, 26.70s/it] 49%|████▉     | 88/178 [37:23<40:58, 27.31s/it] 50%|█████     | 89/178 [37:49<39:45, 26.80s/it] 51%|█████     | 90/178 [38:14<38:27, 26.22s/it] 51%|█████     | 91/178 [38:39<37:22, 25.78s/it] 52%|█████▏    | 92/178 [39:04<36:57, 25.78s/it] 52%|█████▏    | 93/178 [39:29<36:09, 25.52s/it] 53%|█████▎    | 94/178 [39:53<35:03, 25.05s/it] 53%|█████▎    | 95/178 [40:17<34:20, 24.82s/it] 54%|█████▍    | 96/178 [40:41<33:22, 24.42s/it] 54%|█████▍    | 97/178 [41:08<34:09, 25.30s/it] 55%|█████▌    | 98/178 [41:33<33:31, 25.14s/it] 56%|█████▌    | 99/178 [42:06<36:01, 27.37s/it] 56%|█████▌    | 100/178 [42:36<36:35, 28.15s/it] 57%|█████▋    | 101/178 [43:07<37:28, 29.20s/it] 57%|█████▋    | 102/178 [43:35<36:26, 28.76s/it] 58%|█████▊    | 103/178 [44:02<35:20, 28.27s/it] 58%|█████▊    | 104/178 [44:34<36:07, 29.29s/it] 59%|█████▉    | 105/178 [45:03<35:32, 29.21s/it] 60%|█████▉    | 106/178 [45:32<34:59, 29.15s/it] 60%|██████    | 107/178 [46:01<34:38, 29.27s/it] 61%|██████    | 108/178 [46:32<34:32, 29.61s/it] 61%|██████    | 109/178 [47:00<33:37, 29.24s/it] 62%|██████▏   | 110/178 [47:29<33:03, 29.18s/it] 62%|██████▏   | 111/178 [47:57<31:58, 28.63s/it] 63%|██████▎   | 112/178 [48:23<30:48, 28.00s/it] 63%|██████▎   | 113/178 [48:47<28:58, 26.75s/it] 64%|██████▍   | 114/178 [49:17<29:44, 27.89s/it] 65%|██████▍   | 115/178 [49:42<28:09, 26.82s/it] 65%|██████▌   | 116/178 [50:09<27:42, 26.82s/it] 66%|██████▌   | 117/178 [50:39<28:29, 28.03s/it] 66%|██████▋   | 118/178 [51:08<28:09, 28.17s/it] 67%|██████▋   | 119/178 [51:39<28:34, 29.07s/it] 67%|██████▋   | 120/178 [52:10<28:41, 29.68s/it] 68%|██████▊   | 121/178 [52:33<26:19, 27.71s/it] 69%|██████▊   | 122/178 [53:01<25:48, 27.65s/it] 69%|██████▉   | 123/178 [53:31<25:59, 28.36s/it] 70%|██████▉   | 124/178 [54:04<26:44, 29.72s/it] 70%|███████   | 125/178 [54:31<25:33, 28.93s/it] 71%|███████   | 126/178 [55:01<25:17, 29.19s/it] 71%|███████▏  | 127/178 [55:26<23:51, 28.06s/it] 72%|███████▏  | 128/178 [55:53<23:02, 27.64s/it] 72%|███████▏  | 129/178 [56:18<21:59, 26.92s/it] 73%|███████▎  | 130/178 [56:42<20:43, 25.91s/it] 74%|███████▎  | 131/178 [57:11<21:06, 26.95s/it] 74%|███████▍  | 132/178 [57:34<19:47, 25.82s/it] 75%|███████▍  | 133/178 [57:59<19:08, 25.52s/it] 75%|███████▌  | 134/178 [58:29<19:41, 26.86s/it] 76%|███████▌  | 135/178 [58:53<18:40, 26.06s/it] 76%|███████▋  | 136/178 [59:18<17:53, 25.56s/it] 77%|███████▋  | 137/178 [59:43<17:25, 25.51s/it] 78%|███████▊  | 138/178 [1:00:07<16:42, 25.06s/it] 78%|███████▊  | 139/178 [1:00:35<16:57, 26.09s/it] 79%|███████▊  | 140/178 [1:01:02<16:35, 26.21s/it] 79%|███████▉  | 141/178 [1:01:28<16:12, 26.28s/it] 80%|███████▉  | 142/178 [1:02:01<16:51, 28.09s/it] 80%|████████  | 143/178 [1:02:29<16:28, 28.23s/it] 81%|████████  | 144/178 [1:02:51<14:58, 26.42s/it] 81%|████████▏ | 145/178 [1:03:15<14:08, 25.71s/it] 82%|████████▏ | 146/178 [1:03:40<13:27, 25.23s/it] 83%|████████▎ | 147/178 [1:04:03<12:41, 24.58s/it] 83%|████████▎ | 148/178 [1:04:31<12:47, 25.58s/it] 84%|████████▎ | 149/178 [1:04:52<11:48, 24.45s/it] 84%|████████▍ | 150/178 [1:05:22<12:11, 26.12s/it] 85%|████████▍ | 151/178 [1:05:51<12:05, 26.86s/it] 85%|████████▌ | 152/178 [1:06:18<11:42, 27.03s/it] 86%|████████▌ | 153/178 [1:06:44<11:07, 26.70s/it] 87%|████████▋ | 154/178 [1:07:11<10:42, 26.79s/it] 87%|████████▋ | 155/178 [1:07:38<10:14, 26.72s/it] 88%|████████▊ | 156/178 [1:08:08<10:09, 27.69s/it] 88%|████████▊ | 157/178 [1:08:33<09:24, 26.86s/it] 89%|████████▉ | 158/178 [1:09:03<09:15, 27.78s/it] 89%|████████▉ | 159/178 [1:09:30<08:44, 27.62s/it] 90%|████████▉ | 160/178 [1:09:55<08:02, 26.78s/it] 90%|█████████ | 161/178 [1:10:23<07:43, 27.25s/it] 91%|█████████ | 162/178 [1:10:53<07:26, 27.91s/it] 92%|█████████▏| 163/178 [1:11:20<06:55, 27.71s/it] 92%|█████████▏| 164/178 [1:11:47<06:26, 27.64s/it] 93%|█████████▎| 165/178 [1:12:13<05:51, 27.02s/it] 93%|█████████▎| 166/178 [1:12:38<05:18, 26.56s/it] 94%|█████████▍| 167/178 [1:13:11<05:12, 28.41s/it] 94%|█████████▍| 168/178 [1:13:33<04:23, 26.38s/it] 95%|█████████▍| 169/178 [1:13:58<03:54, 26.10s/it] 96%|█████████▌| 170/178 [1:14:23<03:25, 25.66s/it] 96%|█████████▌| 171/178 [1:14:50<03:02, 26.11s/it] 97%|█████████▋| 172/178 [1:15:19<02:41, 26.96s/it] 97%|█████████▋| 173/178 [1:15:42<02:09, 25.90s/it] 98%|█████████▊| 174/178 [1:16:09<01:44, 26.19s/it] 98%|█████████▊| 175/178 [1:16:35<01:18, 26.02s/it] 99%|█████████▉| 176/178 [1:17:01<00:51, 25.93s/it] 99%|█████████▉| 177/178 [1:17:26<00:25, 25.73s/it]100%|██████████| 178/178 [1:17:34<00:00, 20.37s/it]100%|██████████| 178/178 [1:17:34<00:00, 26.15s/it]
11/18/2022 17:15:02 - INFO - __main__ -     bleu-4 = 79.48 
11/18/2022 17:15:02 - INFO - __main__ -     xMatch = 15.4212 
11/18/2022 17:15:02 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 15.42 , BLEU: 79.48
CodeBLEU: 80.07
ngram_match_score: 80.07 , weighted_ngram_match_score: 80.15 , syntax_match_score: 82.22 , dataflow_match_score: 78.43
---------------------------------------------------------------------------------------------
on medium dataset, before_refactoring, refactoring type is method_renaming:
11/18/2022 17:15:17 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/method_renaming/before_refactoring/medium', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/before_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/before_refactoring/medium/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/18/2022 17:15:17 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.layer_norm.bias', 'lm_head.layer_norm.weight', 'lm_head.dense.bias', 'lm_head.decoder.weight', 'lm_head.bias', 'lm_head.dense.weight']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/18/2022 17:15:20 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin
11/18/2022 17:15:24 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/before_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/before_refactoring/medium/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/195 [00:00<?, ?it/s]  1%|          | 1/195 [01:02<3:22:48, 62.73s/it]  1%|          | 2/195 [02:07<3:25:22, 63.85s/it]  2%|▏         | 3/195 [03:10<3:23:47, 63.68s/it]  2%|▏         | 4/195 [04:19<3:28:43, 65.57s/it]  3%|▎         | 5/195 [05:29<3:33:25, 67.40s/it]  3%|▎         | 6/195 [06:30<3:25:15, 65.16s/it]  4%|▎         | 7/195 [07:40<3:28:40, 66.60s/it]  4%|▍         | 8/195 [08:42<3:23:02, 65.15s/it]  5%|▍         | 9/195 [09:50<3:24:42, 66.04s/it]  5%|▌         | 10/195 [10:58<3:25:51, 66.77s/it]  6%|▌         | 11/195 [12:01<3:21:16, 65.63s/it]  6%|▌         | 12/195 [13:09<3:21:52, 66.19s/it]  7%|▋         | 13/195 [14:18<3:23:09, 66.97s/it]  7%|▋         | 14/195 [15:23<3:21:00, 66.63s/it]  8%|▊         | 15/195 [16:39<3:28:20, 69.45s/it]  8%|▊         | 16/195 [17:40<3:19:20, 66.82s/it]  9%|▊         | 17/195 [18:41<3:13:13, 65.13s/it]  9%|▉         | 18/195 [19:50<3:15:04, 66.13s/it] 10%|▉         | 19/195 [20:58<3:15:28, 66.64s/it] 10%|█         | 20/195 [22:00<3:10:17, 65.24s/it] 11%|█         | 21/195 [23:05<3:09:27, 65.33s/it] 11%|█▏        | 22/195 [24:10<3:08:09, 65.26s/it] 12%|█▏        | 23/195 [25:13<3:05:11, 64.60s/it] 12%|█▏        | 24/195 [26:23<3:08:45, 66.23s/it] 13%|█▎        | 25/195 [27:28<3:06:41, 65.89s/it] 13%|█▎        | 26/195 [28:36<3:07:22, 66.53s/it] 14%|█▍        | 27/195 [29:41<3:04:44, 65.98s/it] 14%|█▍        | 28/195 [30:47<3:03:13, 65.83s/it] 15%|█▍        | 29/195 [31:44<2:55:00, 63.26s/it] 15%|█▌        | 30/195 [32:45<2:52:04, 62.57s/it] 16%|█▌        | 31/195 [33:48<2:51:33, 62.76s/it] 16%|█▋        | 32/195 [34:45<2:46:12, 61.18s/it] 17%|█▋        | 33/195 [35:48<2:46:38, 61.72s/it] 17%|█▋        | 34/195 [36:54<2:48:44, 62.89s/it] 18%|█▊        | 35/195 [37:57<2:47:39, 62.87s/it] 18%|█▊        | 36/195 [39:03<2:48:51, 63.72s/it] 19%|█▉        | 37/195 [40:04<2:46:00, 63.04s/it] 19%|█▉        | 38/195 [41:07<2:45:10, 63.12s/it] 20%|██        | 39/195 [42:06<2:40:31, 61.74s/it] 21%|██        | 40/195 [43:16<2:46:03, 64.28s/it] 21%|██        | 41/195 [44:20<2:44:43, 64.18s/it] 22%|██▏       | 42/195 [45:24<2:43:44, 64.21s/it] 22%|██▏       | 43/195 [46:29<2:42:49, 64.27s/it] 23%|██▎       | 44/195 [47:28<2:37:53, 62.74s/it] 23%|██▎       | 45/195 [48:30<2:36:36, 62.65s/it] 24%|██▎       | 46/195 [49:40<2:40:32, 64.65s/it] 24%|██▍       | 47/195 [50:40<2:35:59, 63.24s/it] 25%|██▍       | 48/195 [51:50<2:40:09, 65.37s/it] 25%|██▌       | 49/195 [52:56<2:39:43, 65.64s/it] 26%|██▌       | 50/195 [53:58<2:36:07, 64.60s/it] 26%|██▌       | 51/195 [55:12<2:41:41, 67.37s/it] 27%|██▋       | 52/195 [56:10<2:33:51, 64.55s/it] 27%|██▋       | 53/195 [57:13<2:31:35, 64.05s/it] 28%|██▊       | 54/195 [58:29<2:38:54, 67.62s/it] 28%|██▊       | 55/195 [59:32<2:34:41, 66.30s/it] 29%|██▊       | 56/195 [1:00:38<2:33:14, 66.15s/it] 29%|██▉       | 57/195 [1:01:42<2:30:31, 65.45s/it] 30%|██▉       | 58/195 [1:02:40<2:24:40, 63.36s/it] 30%|███       | 59/195 [1:03:53<2:29:42, 66.05s/it] 31%|███       | 60/195 [1:05:12<2:37:42, 70.09s/it] 31%|███▏      | 61/195 [1:06:16<2:32:26, 68.25s/it] 32%|███▏      | 62/195 [1:07:24<2:30:41, 67.98s/it] 32%|███▏      | 63/195 [1:08:29<2:27:40, 67.12s/it] 33%|███▎      | 64/195 [1:09:46<2:33:06, 70.13s/it] 33%|███▎      | 65/195 [1:10:41<2:22:01, 65.55s/it] 34%|███▍      | 66/195 [1:11:45<2:20:21, 65.28s/it] 34%|███▍      | 67/195 [1:12:50<2:18:45, 65.04s/it] 35%|███▍      | 68/195 [1:13:48<2:13:02, 62.86s/it] 35%|███▌      | 69/195 [1:14:48<2:10:46, 62.27s/it] 36%|███▌      | 70/195 [1:15:54<2:11:49, 63.27s/it] 36%|███▋      | 71/195 [1:17:01<2:12:54, 64.31s/it] 37%|███▋      | 72/195 [1:17:56<2:05:57, 61.45s/it] 37%|███▋      | 73/195 [1:19:04<2:09:28, 63.67s/it] 38%|███▊      | 74/195 [1:20:00<2:03:43, 61.35s/it] 38%|███▊      | 75/195 [1:21:06<2:05:15, 62.63s/it] 39%|███▉      | 76/195 [1:22:08<2:04:08, 62.59s/it] 39%|███▉      | 77/195 [1:23:12<2:03:23, 62.74s/it] 40%|████      | 78/195 [1:24:14<2:02:17, 62.71s/it] 41%|████      | 79/195 [1:25:19<2:02:10, 63.19s/it] 41%|████      | 80/195 [1:26:28<2:04:46, 65.10s/it] 42%|████▏     | 81/195 [1:27:31<2:02:30, 64.47s/it] 42%|████▏     | 82/195 [1:28:33<1:59:49, 63.63s/it] 43%|████▎     | 83/195 [1:29:32<1:56:35, 62.46s/it] 43%|████▎     | 84/195 [1:30:39<1:57:39, 63.60s/it] 44%|████▎     | 85/195 [1:31:49<2:00:26, 65.69s/it] 44%|████▍     | 86/195 [1:32:52<1:57:50, 64.87s/it] 45%|████▍     | 87/195 [1:33:56<1:55:59, 64.44s/it] 45%|████▌     | 88/195 [1:34:53<1:51:17, 62.40s/it] 46%|████▌     | 89/195 [1:36:06<1:55:33, 65.41s/it] 46%|████▌     | 90/195 [1:37:14<1:55:57, 66.26s/it] 47%|████▋     | 91/195 [1:38:23<1:56:09, 67.01s/it] 47%|████▋     | 92/195 [1:39:30<1:55:12, 67.11s/it] 48%|████▊     | 93/195 [1:40:33<1:51:53, 65.82s/it] 48%|████▊     | 94/195 [1:41:44<1:53:13, 67.26s/it] 49%|████▊     | 95/195 [1:42:49<1:51:16, 66.76s/it] 49%|████▉     | 96/195 [1:43:49<1:46:53, 64.78s/it] 50%|████▉     | 97/195 [1:44:50<1:43:37, 63.44s/it] 50%|█████     | 98/195 [1:45:57<1:44:34, 64.68s/it] 51%|█████     | 99/195 [1:47:00<1:42:44, 64.21s/it] 51%|█████▏    | 100/195 [1:48:07<1:42:36, 64.80s/it] 52%|█████▏    | 101/195 [1:49:10<1:40:48, 64.34s/it] 52%|█████▏    | 102/195 [1:50:13<1:38:59, 63.86s/it] 53%|█████▎    | 103/195 [1:51:13<1:36:22, 62.85s/it] 53%|█████▎    | 104/195 [1:52:17<1:35:53, 63.22s/it] 54%|█████▍    | 105/195 [1:53:26<1:37:11, 64.80s/it] 54%|█████▍    | 106/195 [1:54:27<1:34:39, 63.81s/it] 55%|█████▍    | 107/195 [1:55:35<1:35:16, 64.96s/it] 55%|█████▌    | 108/195 [1:56:40<1:34:17, 65.03s/it] 56%|█████▌    | 109/195 [1:57:46<1:33:38, 65.34s/it] 56%|█████▋    | 110/195 [1:58:57<1:34:46, 66.90s/it] 57%|█████▋    | 111/195 [2:00:01<1:32:48, 66.29s/it] 57%|█████▋    | 112/195 [2:01:07<1:31:22, 66.05s/it] 58%|█████▊    | 113/195 [2:02:16<1:31:25, 66.90s/it] 58%|█████▊    | 114/195 [2:03:21<1:29:44, 66.48s/it] 59%|█████▉    | 115/195 [2:04:28<1:28:43, 66.54s/it] 59%|█████▉    | 116/195 [2:05:34<1:27:21, 66.35s/it] 60%|██████    | 117/195 [2:06:41<1:26:34, 66.59s/it] 61%|██████    | 118/195 [2:07:48<1:25:27, 66.60s/it] 61%|██████    | 119/195 [2:08:56<1:25:11, 67.26s/it] 62%|██████▏   | 120/195 [2:10:07<1:25:29, 68.39s/it] 62%|██████▏   | 121/195 [2:11:07<1:20:59, 65.67s/it] 63%|██████▎   | 122/195 [2:12:12<1:19:54, 65.68s/it] 63%|██████▎   | 123/195 [2:13:18<1:18:50, 65.70s/it] 64%|██████▎   | 124/195 [2:14:19<1:16:07, 64.33s/it] 64%|██████▍   | 125/195 [2:15:25<1:15:33, 64.76s/it] 65%|██████▍   | 126/195 [2:16:23<1:12:06, 62.71s/it] 65%|██████▌   | 127/195 [2:17:28<1:11:50, 63.38s/it] 66%|██████▌   | 128/195 [2:18:30<1:10:22, 63.03s/it] 66%|██████▌   | 129/195 [2:19:32<1:08:55, 62.66s/it] 67%|██████▋   | 130/195 [2:20:35<1:07:55, 62.71s/it] 67%|██████▋   | 131/195 [2:21:38<1:07:07, 62.93s/it] 68%|██████▊   | 132/195 [2:22:42<1:06:22, 63.21s/it] 68%|██████▊   | 133/195 [2:23:48<1:06:16, 64.14s/it] 69%|██████▊   | 134/195 [2:25:01<1:07:53, 66.78s/it] 69%|██████▉   | 135/195 [2:25:56<1:03:15, 63.26s/it] 70%|██████▉   | 136/195 [2:26:58<1:01:47, 62.84s/it] 70%|███████   | 137/195 [2:28:15<1:04:43, 66.96s/it] 71%|███████   | 138/195 [2:29:17<1:02:07, 65.39s/it] 71%|███████▏  | 139/195 [2:30:16<59:25, 63.67s/it]   72%|███████▏  | 140/195 [2:31:24<59:33, 64.98s/it] 72%|███████▏  | 141/195 [2:32:31<59:00, 65.56s/it] 73%|███████▎  | 142/195 [2:33:33<56:48, 64.30s/it] 73%|███████▎  | 143/195 [2:34:40<56:35, 65.29s/it] 74%|███████▍  | 144/195 [2:35:42<54:44, 64.40s/it] 74%|███████▍  | 145/195 [2:36:44<53:01, 63.63s/it] 75%|███████▍  | 146/195 [2:37:52<53:04, 64.99s/it] 75%|███████▌  | 147/195 [2:39:04<53:35, 67.00s/it] 76%|███████▌  | 148/195 [2:40:06<51:23, 65.60s/it] 76%|███████▋  | 149/195 [2:41:14<50:39, 66.08s/it] 77%|███████▋  | 150/195 [2:42:07<46:42, 62.29s/it] 77%|███████▋  | 151/195 [2:43:11<46:02, 62.78s/it] 78%|███████▊  | 152/195 [2:44:12<44:41, 62.37s/it] 78%|███████▊  | 153/195 [2:45:21<44:59, 64.27s/it] 79%|███████▉  | 154/195 [2:46:24<43:35, 63.80s/it] 79%|███████▉  | 155/195 [2:47:29<42:47, 64.18s/it] 80%|████████  | 156/195 [2:48:34<41:48, 64.32s/it] 81%|████████  | 157/195 [2:49:36<40:27, 63.89s/it] 81%|████████  | 158/195 [2:50:36<38:34, 62.55s/it] 82%|████████▏ | 159/195 [2:51:42<38:14, 63.74s/it] 82%|████████▏ | 160/195 [2:52:41<36:15, 62.15s/it] 83%|████████▎ | 161/195 [2:53:44<35:25, 62.51s/it] 83%|████████▎ | 162/195 [2:54:46<34:13, 62.22s/it] 84%|████████▎ | 163/195 [2:56:00<35:09, 65.93s/it] 84%|████████▍ | 164/195 [2:57:03<33:30, 64.87s/it] 85%|████████▍ | 165/195 [2:58:05<31:58, 63.94s/it] 85%|████████▌ | 166/195 [2:59:14<31:46, 65.75s/it] 86%|████████▌ | 167/195 [3:00:20<30:35, 65.57s/it] 86%|████████▌ | 168/195 [3:01:18<28:28, 63.28s/it] 87%|████████▋ | 169/195 [3:02:14<26:35, 61.36s/it] 87%|████████▋ | 170/195 [3:03:21<26:10, 62.82s/it] 88%|████████▊ | 171/195 [3:04:28<25:39, 64.14s/it] 88%|████████▊ | 172/195 [3:05:36<25:00, 65.24s/it] 89%|████████▊ | 173/195 [3:06:33<23:00, 62.76s/it] 89%|████████▉ | 174/195 [3:07:33<21:41, 61.99s/it] 90%|████████▉ | 175/195 [3:08:36<20:45, 62.26s/it] 90%|█████████ | 176/195 [3:09:35<19:28, 61.49s/it] 91%|█████████ | 177/195 [3:10:46<19:13, 64.08s/it] 91%|█████████▏| 178/195 [3:11:48<18:01, 63.60s/it] 92%|█████████▏| 179/195 [3:12:55<17:12, 64.55s/it] 92%|█████████▏| 180/195 [3:13:59<16:08, 64.56s/it] 93%|█████████▎| 181/195 [3:15:05<15:07, 64.82s/it] 93%|█████████▎| 182/195 [3:16:12<14:11, 65.50s/it] 94%|█████████▍| 183/195 [3:17:16<13:00, 65.08s/it] 94%|█████████▍| 184/195 [3:18:22<11:59, 65.37s/it] 95%|█████████▍| 185/195 [3:19:31<11:05, 66.55s/it] 95%|█████████▌| 186/195 [3:20:36<09:52, 65.83s/it] 96%|█████████▌| 187/195 [3:21:45<08:56, 67.02s/it] 96%|█████████▋| 188/195 [3:22:43<07:29, 64.16s/it] 97%|█████████▋| 189/195 [3:23:45<06:21, 63.58s/it] 97%|█████████▋| 190/195 [3:24:48<05:16, 63.27s/it] 98%|█████████▊| 191/195 [3:25:59<04:23, 65.81s/it] 98%|█████████▊| 192/195 [3:27:10<03:21, 67.17s/it] 99%|█████████▉| 193/195 [3:28:20<02:16, 68.09s/it] 99%|█████████▉| 194/195 [3:29:19<01:05, 65.35s/it]100%|██████████| 195/195 [3:29:35<00:00, 50.72s/it]100%|██████████| 195/195 [3:29:35<00:00, 64.49s/it]
11/18/2022 20:45:14 - INFO - __main__ -     bleu-4 = 90.04 
11/18/2022 20:45:14 - INFO - __main__ -     xMatch = 8.9593 
11/18/2022 20:45:14 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 8.96 , BLEU: 90.04
CodeBLEU: 87.67
ngram_match_score: 87.67 , weighted_ngram_match_score: 90.06 , syntax_match_score: 89.52 , dataflow_match_score: 81.07
---------------------------------------------------------------------------------------------
on medium dataset, after_refactoring, refactoring type is method_renaming:
11/18/2022 20:45:46 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/method_renaming/after_refactoring/medium', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/after_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/after_refactoring/medium/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/18/2022 20:45:46 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.dense.weight', 'lm_head.decoder.weight', 'lm_head.dense.bias', 'lm_head.layer_norm.weight', 'lm_head.bias', 'lm_head.layer_norm.bias']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/18/2022 20:45:49 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin
11/18/2022 20:45:53 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/after_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/method_renaming/after_refactoring/medium/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/195 [00:00<?, ?it/s]  1%|          | 1/195 [01:02<3:21:37, 62.36s/it]  1%|          | 2/195 [02:04<3:19:15, 61.94s/it]  2%|▏         | 3/195 [03:05<3:18:00, 61.88s/it]  2%|▏         | 4/195 [04:12<3:22:55, 63.74s/it]  3%|▎         | 5/195 [05:21<3:28:20, 65.79s/it]  3%|▎         | 6/195 [06:21<3:20:17, 63.59s/it]  4%|▎         | 7/195 [07:29<3:23:47, 65.04s/it]  4%|▍         | 8/195 [08:29<3:17:32, 63.38s/it]  5%|▍         | 9/195 [09:35<3:19:18, 64.29s/it]  5%|▌         | 10/195 [10:41<3:20:23, 64.99s/it]  6%|▌         | 11/195 [11:43<3:15:53, 63.88s/it]  6%|▌         | 12/195 [12:50<3:17:33, 64.77s/it]  7%|▋         | 13/195 [13:55<3:17:13, 65.02s/it]  7%|▋         | 14/195 [15:00<3:15:44, 64.88s/it]  8%|▊         | 15/195 [16:13<3:22:04, 67.36s/it]  8%|▊         | 16/195 [17:11<3:12:50, 64.64s/it]  9%|▊         | 17/195 [18:11<3:07:24, 63.17s/it]  9%|▉         | 18/195 [19:16<3:07:48, 63.66s/it] 10%|▉         | 19/195 [20:22<3:08:46, 64.35s/it] 10%|█         | 20/195 [21:22<3:03:58, 63.08s/it] 11%|█         | 21/195 [22:25<3:02:47, 63.03s/it] 11%|█▏        | 22/195 [23:28<3:01:35, 62.98s/it] 12%|█▏        | 23/195 [24:29<2:59:11, 62.51s/it] 12%|█▏        | 24/195 [25:37<3:02:52, 64.17s/it] 13%|█▎        | 25/195 [26:42<3:02:11, 64.30s/it] 13%|█▎        | 26/195 [27:47<3:02:06, 64.66s/it] 14%|█▍        | 27/195 [28:51<3:00:12, 64.36s/it] 14%|█▍        | 28/195 [29:54<2:57:59, 63.95s/it] 15%|█▍        | 29/195 [30:49<2:49:52, 61.40s/it] 15%|█▌        | 30/195 [31:48<2:46:58, 60.72s/it] 16%|█▌        | 31/195 [32:50<2:46:37, 60.96s/it] 16%|█▋        | 32/195 [33:44<2:39:45, 58.81s/it] 17%|█▋        | 33/195 [34:45<2:40:55, 59.60s/it] 17%|█▋        | 34/195 [35:49<2:43:47, 61.04s/it] 18%|█▊        | 35/195 [36:51<2:43:16, 61.23s/it] 18%|█▊        | 36/195 [37:55<2:44:15, 61.99s/it] 19%|█▉        | 37/195 [38:54<2:41:20, 61.27s/it] 19%|█▉        | 38/195 [39:56<2:40:51, 61.48s/it] 20%|██        | 39/195 [40:53<2:36:15, 60.10s/it] 21%|██        | 40/195 [42:02<2:42:01, 62.72s/it] 21%|██        | 41/195 [43:05<2:41:09, 62.79s/it] 22%|██▏       | 42/195 [44:07<2:39:40, 62.62s/it] 22%|██▏       | 43/195 [45:11<2:39:06, 62.80s/it] 23%|██▎       | 44/195 [46:08<2:33:58, 61.18s/it] 23%|██▎       | 45/195 [47:08<2:31:49, 60.73s/it] 24%|██▎       | 46/195 [48:15<2:35:36, 62.66s/it] 24%|██▍       | 47/195 [49:12<2:30:50, 61.15s/it] 25%|██▍       | 48/195 [50:22<2:36:04, 63.70s/it] 25%|██▌       | 49/195 [51:26<2:35:26, 63.88s/it] 26%|██▌       | 50/195 [52:28<2:32:23, 63.06s/it] 26%|██▌       | 51/195 [53:39<2:37:05, 65.45s/it] 27%|██▋       | 52/195 [54:35<2:29:53, 62.89s/it] 27%|██▋       | 53/195 [55:34<2:25:55, 61.66s/it] 28%|██▊       | 54/195 [56:46<2:32:14, 64.78s/it] 28%|██▊       | 55/195 [57:46<2:27:26, 63.19s/it] 29%|██▊       | 56/195 [58:49<2:26:08, 63.08s/it] 29%|██▉       | 57/195 [59:49<2:23:07, 62.23s/it] 30%|██▉       | 58/195 [1:00:45<2:18:07, 60.50s/it] 30%|███       | 59/195 [1:01:55<2:23:41, 63.39s/it] 31%|███       | 60/195 [1:03:05<2:26:44, 65.22s/it] 31%|███▏      | 61/195 [1:04:02<2:20:03, 62.71s/it] 32%|███▏      | 62/195 [1:05:03<2:17:44, 62.14s/it] 32%|███▏      | 63/195 [1:06:06<2:17:12, 62.37s/it] 33%|███▎      | 64/195 [1:07:15<2:21:02, 64.60s/it] 33%|███▎      | 65/195 [1:08:04<2:09:39, 59.85s/it] 34%|███▍      | 66/195 [1:09:04<2:08:52, 59.94s/it] 34%|███▍      | 67/195 [1:10:05<2:08:28, 60.22s/it] 35%|███▍      | 68/195 [1:11:00<2:04:02, 58.60s/it] 35%|███▌      | 69/195 [1:11:58<2:02:37, 58.39s/it] 36%|███▌      | 70/195 [1:12:59<2:03:37, 59.34s/it] 36%|███▋      | 71/195 [1:14:01<2:03:46, 59.89s/it] 37%|███▋      | 72/195 [1:14:52<1:57:46, 57.45s/it] 37%|███▋      | 73/195 [1:15:58<2:01:56, 59.97s/it] 38%|███▊      | 74/195 [1:16:50<1:56:17, 57.66s/it] 38%|███▊      | 75/195 [1:17:54<1:58:39, 59.33s/it] 39%|███▉      | 76/195 [1:18:51<1:56:32, 58.76s/it] 39%|███▉      | 77/195 [1:19:49<1:54:48, 58.37s/it] 40%|████      | 78/195 [1:20:48<1:54:19, 58.62s/it] 41%|████      | 79/195 [1:21:48<1:54:30, 59.23s/it] 41%|████      | 80/195 [1:22:52<1:55:45, 60.40s/it] 42%|████▏     | 81/195 [1:23:51<1:54:28, 60.25s/it] 42%|████▏     | 82/195 [1:24:50<1:52:31, 59.75s/it] 43%|████▎     | 83/195 [1:25:47<1:50:10, 59.02s/it] 43%|████▎     | 84/195 [1:26:51<1:51:51, 60.47s/it] 44%|████▎     | 85/195 [1:27:57<1:54:00, 62.19s/it] 44%|████▍     | 86/195 [1:28:58<1:51:53, 61.59s/it] 45%|████▍     | 87/195 [1:29:58<1:50:11, 61.22s/it] 45%|████▌     | 88/195 [1:30:53<1:46:05, 59.49s/it] 46%|████▌     | 89/195 [1:32:03<1:50:14, 62.40s/it] 46%|████▌     | 90/195 [1:33:08<1:50:53, 63.37s/it] 47%|████▋     | 91/195 [1:34:13<1:50:28, 63.73s/it] 47%|████▋     | 92/195 [1:35:16<1:49:16, 63.66s/it] 48%|████▊     | 93/195 [1:36:17<1:46:39, 62.74s/it] 48%|████▊     | 94/195 [1:37:24<1:47:56, 64.12s/it] 49%|████▊     | 95/195 [1:38:26<1:45:56, 63.56s/it] 49%|████▉     | 96/195 [1:39:25<1:42:09, 61.92s/it] 50%|████▉     | 97/195 [1:40:23<1:39:39, 61.01s/it] 50%|█████     | 98/195 [1:41:29<1:40:38, 62.26s/it] 51%|█████     | 99/195 [1:42:29<1:38:35, 61.62s/it] 51%|█████▏    | 100/195 [1:43:31<1:37:50, 61.80s/it] 52%|█████▏    | 101/195 [1:44:28<1:34:29, 60.31s/it] 52%|█████▏    | 102/195 [1:45:26<1:32:35, 59.74s/it] 53%|█████▎    | 103/195 [1:46:23<1:30:04, 58.74s/it] 53%|█████▎    | 104/195 [1:47:22<1:29:33, 59.05s/it] 54%|█████▍    | 105/195 [1:48:27<1:31:07, 60.75s/it] 54%|█████▍    | 106/195 [1:49:25<1:28:46, 59.85s/it] 55%|█████▍    | 107/195 [1:50:29<1:29:35, 61.09s/it] 55%|█████▌    | 108/195 [1:51:31<1:28:58, 61.37s/it] 56%|█████▌    | 109/195 [1:52:32<1:27:51, 61.29s/it] 56%|█████▋    | 110/195 [1:53:37<1:28:34, 62.53s/it] 57%|█████▋    | 111/195 [1:54:39<1:27:08, 62.25s/it] 57%|█████▋    | 112/195 [1:55:41<1:26:10, 62.29s/it] 58%|█████▊    | 113/195 [1:56:47<1:26:36, 63.37s/it] 58%|█████▊    | 114/195 [1:57:51<1:25:36, 63.41s/it] 59%|█████▉    | 115/195 [1:58:54<1:24:31, 63.40s/it] 59%|█████▉    | 116/195 [1:59:56<1:23:01, 63.06s/it] 60%|██████    | 117/195 [2:01:00<1:22:04, 63.14s/it] 61%|██████    | 118/195 [2:02:02<1:20:49, 62.98s/it] 61%|██████    | 119/195 [2:03:07<1:20:24, 63.48s/it] 62%|██████▏   | 120/195 [2:04:15<1:21:07, 64.89s/it] 62%|██████▏   | 121/195 [2:05:12<1:16:54, 62.36s/it] 63%|██████▎   | 122/195 [2:06:15<1:16:07, 62.57s/it] 63%|██████▎   | 123/195 [2:07:18<1:15:26, 62.87s/it] 64%|██████▎   | 124/195 [2:08:18<1:13:14, 61.89s/it] 64%|██████▍   | 125/195 [2:09:21<1:12:38, 62.27s/it] 65%|██████▍   | 126/195 [2:10:16<1:08:56, 59.95s/it] 65%|██████▌   | 127/195 [2:11:18<1:08:39, 60.58s/it] 66%|██████▌   | 128/195 [2:12:17<1:07:14, 60.21s/it] 66%|██████▌   | 129/195 [2:13:16<1:05:42, 59.73s/it] 67%|██████▋   | 130/195 [2:14:15<1:04:46, 59.79s/it] 67%|██████▋   | 131/195 [2:15:15<1:03:44, 59.76s/it] 68%|██████▊   | 132/195 [2:16:15<1:02:52, 59.88s/it] 68%|██████▊   | 133/195 [2:17:17<1:02:23, 60.38s/it] 69%|██████▊   | 134/195 [2:18:26<1:03:54, 62.86s/it] 69%|██████▉   | 135/195 [2:19:18<59:46, 59.77s/it]   70%|██████▉   | 136/195 [2:20:16<58:08, 59.12s/it] 70%|███████   | 137/195 [2:21:28<1:00:56, 63.05s/it] 71%|███████   | 138/195 [2:22:26<58:37, 61.70s/it]   71%|███████▏  | 139/195 [2:23:23<56:15, 60.28s/it] 72%|███████▏  | 140/195 [2:24:29<56:41, 61.85s/it] 72%|███████▏  | 141/195 [2:25:32<55:51, 62.07s/it] 73%|███████▎  | 142/195 [2:26:29<53:39, 60.74s/it] 73%|███████▎  | 143/195 [2:27:34<53:35, 61.83s/it] 74%|███████▍  | 144/195 [2:28:34<52:13, 61.44s/it] 74%|███████▍  | 145/195 [2:29:34<50:45, 60.92s/it] 75%|███████▍  | 146/195 [2:30:40<51:04, 62.54s/it] 75%|███████▌  | 147/195 [2:31:48<51:16, 64.10s/it] 76%|███████▌  | 148/195 [2:32:48<49:19, 62.98s/it] 76%|███████▋  | 149/195 [2:33:52<48:29, 63.25s/it] 77%|███████▋  | 150/195 [2:34:43<44:33, 59.42s/it] 77%|███████▋  | 151/195 [2:35:43<43:45, 59.68s/it] 78%|███████▊  | 152/195 [2:36:39<42:05, 58.74s/it] 78%|███████▊  | 153/195 [2:37:45<42:35, 60.85s/it] 79%|███████▉  | 154/195 [2:38:44<41:14, 60.36s/it] 79%|███████▉  | 155/195 [2:39:46<40:28, 60.72s/it] 80%|████████  | 156/195 [2:40:49<39:52, 61.35s/it] 81%|████████  | 157/195 [2:41:49<38:35, 60.93s/it] 81%|████████  | 158/195 [2:42:46<36:52, 59.80s/it] 82%|████████▏ | 159/195 [2:43:49<36:28, 60.80s/it] 82%|████████▏ | 160/195 [2:44:45<34:35, 59.30s/it] 83%|████████▎ | 161/195 [2:45:45<33:46, 59.61s/it] 83%|████████▎ | 162/195 [2:46:44<32:37, 59.31s/it] 84%|████████▎ | 163/195 [2:47:54<33:25, 62.68s/it] 84%|████████▍ | 164/195 [2:48:54<31:57, 61.86s/it] 85%|████████▍ | 165/195 [2:49:54<30:39, 61.32s/it] 85%|████████▌ | 166/195 [2:51:03<30:39, 63.42s/it] 86%|████████▌ | 167/195 [2:52:06<29:34, 63.36s/it] 86%|████████▌ | 168/195 [2:53:02<27:35, 61.30s/it] 87%|████████▋ | 169/195 [2:53:56<25:37, 59.15s/it] 87%|████████▋ | 170/195 [2:54:58<24:57, 59.91s/it] 88%|████████▊ | 171/195 [2:56:03<24:34, 61.42s/it] 88%|████████▊ | 172/195 [2:57:09<24:00, 62.65s/it] 89%|████████▊ | 173/195 [2:58:03<22:03, 60.18s/it] 89%|████████▉ | 174/195 [2:58:57<20:26, 58.41s/it] 90%|████████▉ | 175/195 [2:59:57<19:38, 58.93s/it] 90%|█████████ | 176/195 [3:00:54<18:23, 58.09s/it] 91%|█████████ | 177/195 [3:02:01<18:17, 61.00s/it] 91%|█████████▏| 178/195 [3:03:01<17:09, 60.55s/it] 92%|█████████▏| 179/195 [3:04:05<16:25, 61.58s/it] 92%|█████████▏| 180/195 [3:05:07<15:24, 61.63s/it] 93%|█████████▎| 181/195 [3:06:08<14:21, 61.51s/it] 93%|█████████▎| 182/195 [3:07:11<13:24, 61.91s/it] 94%|█████████▍| 183/195 [3:08:10<12:14, 61.24s/it] 94%|█████████▍| 184/195 [3:09:14<11:23, 62.10s/it] 95%|█████████▍| 185/195 [3:10:21<10:33, 63.35s/it] 95%|█████████▌| 186/195 [3:11:23<09:27, 63.01s/it] 96%|█████████▌| 187/195 [3:12:29<08:31, 64.00s/it] 96%|█████████▋| 188/195 [3:13:24<07:08, 61.22s/it] 97%|█████████▋| 189/195 [3:14:23<06:03, 60.61s/it] 97%|█████████▋| 190/195 [3:15:20<04:57, 59.55s/it] 98%|█████████▊| 191/195 [3:16:24<04:03, 60.80s/it] 98%|█████████▊| 192/195 [3:17:27<03:04, 61.40s/it] 99%|█████████▉| 193/195 [3:18:35<02:06, 63.36s/it] 99%|█████████▉| 194/195 [3:19:30<01:00, 60.93s/it]100%|██████████| 195/195 [3:19:46<00:00, 47.47s/it]100%|██████████| 195/195 [3:19:46<00:00, 61.47s/it]
11/19/2022 00:05:55 - INFO - __main__ -     bleu-4 = 89.98 
11/19/2022 00:05:55 - INFO - __main__ -     xMatch = 8.3802 
11/19/2022 00:05:55 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 8.38 , BLEU: 89.98
CodeBLEU: 87.63
ngram_match_score: 87.63 , weighted_ngram_match_score: 90.0 , syntax_match_score: 89.49 , dataflow_match_score: 81.04
---------------------------------------------------------------------------------------------
on small dataset, before_refactoring, refactoring type is parameter_renaming:
11/19/2022 00:06:25 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/parameter_renaming/before_refactoring/small', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/before_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/before_refactoring/small/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/19/2022 00:06:26 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.layer_norm.weight', 'lm_head.dense.weight', 'lm_head.bias', 'lm_head.dense.bias', 'lm_head.decoder.weight', 'lm_head.layer_norm.bias']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/19/2022 00:06:29 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin
11/19/2022 00:06:32 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/before_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/before_refactoring/small/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/108 [00:00<?, ?it/s]  1%|          | 1/108 [00:28<51:36, 28.94s/it]  2%|▏         | 2/108 [01:01<54:53, 31.07s/it]  3%|▎         | 3/108 [01:30<52:58, 30.28s/it]  4%|▎         | 4/108 [02:00<51:52, 29.93s/it]  5%|▍         | 5/108 [02:28<50:17, 29.30s/it]  6%|▌         | 6/108 [02:55<48:16, 28.39s/it]  6%|▋         | 7/108 [03:21<46:35, 27.68s/it]  7%|▋         | 8/108 [03:47<45:29, 27.29s/it]  8%|▊         | 9/108 [04:15<45:01, 27.29s/it]  9%|▉         | 10/108 [04:40<43:54, 26.89s/it] 10%|█         | 11/108 [05:07<43:04, 26.64s/it] 11%|█         | 12/108 [05:31<41:26, 25.90s/it] 12%|█▏        | 13/108 [05:56<40:46, 25.76s/it] 13%|█▎        | 14/108 [06:20<39:15, 25.06s/it] 14%|█▍        | 15/108 [06:51<41:47, 26.97s/it] 15%|█▍        | 16/108 [07:17<40:50, 26.63s/it] 16%|█▌        | 17/108 [07:43<40:11, 26.50s/it] 17%|█▋        | 18/108 [08:11<40:12, 26.81s/it] 18%|█▊        | 19/108 [08:34<38:25, 25.90s/it] 19%|█▊        | 20/108 [08:56<36:09, 24.65s/it] 19%|█▉        | 21/108 [09:19<34:50, 24.03s/it] 20%|██        | 22/108 [09:45<35:12, 24.57s/it] 21%|██▏       | 23/108 [10:09<34:57, 24.68s/it] 22%|██▏       | 24/108 [10:35<34:48, 24.86s/it] 23%|██▎       | 25/108 [10:58<33:53, 24.50s/it] 24%|██▍       | 26/108 [11:24<33:49, 24.75s/it] 25%|██▌       | 27/108 [11:52<34:48, 25.78s/it] 26%|██▌       | 28/108 [12:16<33:35, 25.19s/it] 27%|██▋       | 29/108 [12:42<33:33, 25.49s/it] 28%|██▊       | 30/108 [13:06<32:28, 24.98s/it] 29%|██▊       | 31/108 [13:29<31:14, 24.34s/it] 30%|██▉       | 32/108 [13:53<30:48, 24.32s/it] 31%|███       | 33/108 [14:20<31:36, 25.29s/it] 31%|███▏      | 34/108 [14:43<30:11, 24.48s/it] 32%|███▏      | 35/108 [15:08<30:02, 24.69s/it] 33%|███▎      | 36/108 [15:37<31:08, 25.95s/it] 34%|███▍      | 37/108 [16:01<30:08, 25.47s/it] 35%|███▌      | 38/108 [16:29<30:27, 26.10s/it] 36%|███▌      | 39/108 [16:54<29:28, 25.63s/it] 37%|███▋      | 40/108 [17:17<28:19, 24.99s/it] 38%|███▊      | 41/108 [17:44<28:27, 25.49s/it] 39%|███▉      | 42/108 [18:08<27:41, 25.17s/it] 40%|███▉      | 43/108 [18:33<27:07, 25.05s/it] 41%|████      | 44/108 [18:56<26:11, 24.55s/it] 42%|████▏     | 45/108 [19:19<25:17, 24.09s/it] 43%|████▎     | 46/108 [19:44<25:06, 24.29s/it] 44%|████▎     | 47/108 [20:07<24:25, 24.03s/it] 44%|████▍     | 48/108 [20:31<23:58, 23.97s/it] 45%|████▌     | 49/108 [20:59<24:35, 25.01s/it] 46%|████▋     | 50/108 [21:28<25:30, 26.38s/it] 47%|████▋     | 51/108 [21:55<25:01, 26.34s/it] 48%|████▊     | 52/108 [22:20<24:27, 26.21s/it] 49%|████▉     | 53/108 [22:47<24:07, 26.32s/it] 50%|█████     | 54/108 [23:16<24:31, 27.24s/it] 51%|█████     | 55/108 [23:44<24:02, 27.22s/it] 52%|█████▏    | 56/108 [24:12<23:51, 27.54s/it] 53%|█████▎    | 57/108 [24:39<23:23, 27.53s/it] 54%|█████▎    | 58/108 [25:04<22:17, 26.75s/it] 55%|█████▍    | 59/108 [25:32<22:09, 27.13s/it] 56%|█████▌    | 60/108 [26:03<22:36, 28.25s/it] 56%|█████▋    | 61/108 [26:37<23:19, 29.78s/it] 57%|█████▋    | 62/108 [27:04<22:24, 29.22s/it] 58%|█████▊    | 63/108 [27:32<21:34, 28.77s/it] 59%|█████▉    | 64/108 [27:59<20:40, 28.19s/it] 60%|██████    | 65/108 [28:30<20:49, 29.06s/it] 61%|██████    | 66/108 [28:59<20:13, 28.89s/it] 62%|██████▏   | 67/108 [29:24<19:02, 27.86s/it] 63%|██████▎   | 68/108 [29:48<17:51, 26.79s/it] 64%|██████▍   | 69/108 [30:13<17:04, 26.27s/it] 65%|██████▍   | 70/108 [30:38<16:22, 25.86s/it] 66%|██████▌   | 71/108 [31:02<15:33, 25.22s/it] 67%|██████▋   | 72/108 [31:29<15:22, 25.63s/it] 68%|██████▊   | 73/108 [31:58<15:38, 26.82s/it] 69%|██████▊   | 74/108 [32:22<14:38, 25.83s/it] 69%|██████▉   | 75/108 [32:48<14:16, 25.95s/it] 70%|███████   | 76/108 [33:16<14:09, 26.54s/it] 71%|███████▏  | 77/108 [33:45<14:10, 27.42s/it] 72%|███████▏  | 78/108 [34:07<12:53, 25.79s/it] 73%|███████▎  | 79/108 [34:32<12:15, 25.36s/it] 74%|███████▍  | 80/108 [34:55<11:35, 24.82s/it] 75%|███████▌  | 81/108 [35:17<10:43, 23.83s/it] 76%|███████▌  | 82/108 [35:42<10:31, 24.27s/it] 77%|███████▋  | 83/108 [36:07<10:12, 24.49s/it] 78%|███████▊  | 84/108 [36:31<09:40, 24.19s/it] 79%|███████▊  | 85/108 [36:56<09:25, 24.60s/it] 80%|███████▉  | 86/108 [37:18<08:42, 23.74s/it] 81%|████████  | 87/108 [37:44<08:32, 24.38s/it] 81%|████████▏ | 88/108 [38:09<08:13, 24.66s/it] 82%|████████▏ | 89/108 [38:35<07:55, 25.04s/it] 83%|████████▎ | 90/108 [39:00<07:31, 25.07s/it] 84%|████████▍ | 91/108 [39:21<06:45, 23.88s/it] 85%|████████▌ | 92/108 [39:50<06:43, 25.23s/it] 86%|████████▌ | 93/108 [40:15<06:19, 25.30s/it] 87%|████████▋ | 94/108 [40:38<05:44, 24.63s/it] 88%|████████▊ | 95/108 [41:07<05:35, 25.84s/it] 89%|████████▉ | 96/108 [41:30<05:00, 25.07s/it] 90%|████████▉ | 97/108 [41:57<04:42, 25.64s/it] 91%|█████████ | 98/108 [42:23<04:17, 25.78s/it] 92%|█████████▏| 99/108 [42:47<03:47, 25.26s/it] 93%|█████████▎| 100/108 [43:13<03:24, 25.56s/it] 94%|█████████▎| 101/108 [43:38<02:57, 25.30s/it] 94%|█████████▍| 102/108 [44:04<02:32, 25.47s/it] 95%|█████████▌| 103/108 [44:29<02:05, 25.18s/it] 96%|█████████▋| 104/108 [44:54<01:41, 25.34s/it] 97%|█████████▋| 105/108 [45:20<01:16, 25.61s/it] 98%|█████████▊| 106/108 [45:45<00:50, 25.17s/it] 99%|█████████▉| 107/108 [46:09<00:25, 25.07s/it]100%|██████████| 108/108 [46:27<00:00, 22.77s/it]100%|██████████| 108/108 [46:27<00:00, 25.81s/it]
11/19/2022 00:53:04 - INFO - __main__ -     bleu-4 = 81.29 
11/19/2022 00:53:04 - INFO - __main__ -     xMatch = 17.5087 
11/19/2022 00:53:04 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 17.51 , BLEU: 81.29
CodeBLEU: 81.55
ngram_match_score: 81.55 , weighted_ngram_match_score: 81.48 , syntax_match_score: 83.31 , dataflow_match_score: 80.12
---------------------------------------------------------------------------------------------
on small dataset, after_refactoring, refactoring type is parameter_renaming:
11/19/2022 00:53:14 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/parameter_renaming/after_refactoring/small', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/after_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/after_refactoring/small/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/19/2022 00:53:16 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.layer_norm.weight', 'lm_head.dense.weight', 'lm_head.bias', 'lm_head.dense.bias', 'lm_head.decoder.weight', 'lm_head.layer_norm.bias']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/19/2022 00:53:18 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/small/pytorch_model.bin
11/19/2022 00:53:22 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/after_refactoring/small/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/after_refactoring/small/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/108 [00:00<?, ?it/s]  1%|          | 1/108 [00:29<52:04, 29.20s/it]  2%|▏         | 2/108 [01:03<56:57, 32.24s/it]  3%|▎         | 3/108 [01:31<52:34, 30.04s/it]  4%|▎         | 4/108 [01:59<51:16, 29.58s/it]  5%|▍         | 5/108 [02:25<48:09, 28.05s/it]  6%|▌         | 6/108 [02:49<45:29, 26.76s/it]  6%|▋         | 7/108 [03:15<44:53, 26.67s/it]  7%|▋         | 8/108 [03:40<43:25, 26.05s/it]  8%|▊         | 9/108 [04:10<45:10, 27.37s/it]  9%|▉         | 10/108 [04:39<45:20, 27.76s/it] 10%|█         | 11/108 [05:07<44:47, 27.70s/it] 11%|█         | 12/108 [05:33<43:43, 27.32s/it] 12%|█▏        | 13/108 [06:01<43:41, 27.59s/it] 13%|█▎        | 14/108 [06:29<43:20, 27.66s/it] 14%|█▍        | 15/108 [07:01<45:01, 29.05s/it] 15%|█▍        | 16/108 [07:25<42:08, 27.48s/it] 16%|█▌        | 17/108 [07:50<40:31, 26.71s/it] 17%|█▋        | 18/108 [08:18<40:27, 26.98s/it] 18%|█▊        | 19/108 [08:44<39:28, 26.62s/it] 19%|█▊        | 20/108 [09:06<37:20, 25.46s/it] 19%|█▉        | 21/108 [09:30<36:03, 24.87s/it] 20%|██        | 22/108 [09:59<37:23, 26.08s/it] 21%|██▏       | 23/108 [10:26<37:33, 26.51s/it] 22%|██▏       | 24/108 [10:55<38:02, 27.17s/it] 23%|██▎       | 25/108 [11:21<37:15, 26.94s/it] 24%|██▍       | 26/108 [11:49<37:08, 27.17s/it] 25%|██▌       | 27/108 [12:18<37:30, 27.78s/it] 26%|██▌       | 28/108 [12:43<36:01, 27.02s/it] 27%|██▋       | 29/108 [13:12<36:01, 27.36s/it] 28%|██▊       | 30/108 [13:38<35:05, 26.99s/it] 29%|██▊       | 31/108 [14:02<33:29, 26.10s/it] 30%|██▉       | 32/108 [14:27<32:41, 25.80s/it] 31%|███       | 33/108 [14:56<33:38, 26.91s/it] 31%|███▏      | 34/108 [15:21<32:24, 26.27s/it] 32%|███▏      | 35/108 [15:48<32:14, 26.50s/it] 33%|███▎      | 36/108 [16:19<33:20, 27.78s/it] 34%|███▍      | 37/108 [16:45<32:18, 27.31s/it] 35%|███▌      | 38/108 [17:15<32:34, 27.92s/it] 36%|███▌      | 39/108 [17:42<32:01, 27.84s/it] 37%|███▋      | 40/108 [18:08<30:45, 27.15s/it] 38%|███▊      | 41/108 [18:39<31:38, 28.33s/it] 39%|███▉      | 42/108 [19:06<30:40, 27.89s/it] 40%|███▉      | 43/108 [19:32<29:44, 27.46s/it] 41%|████      | 44/108 [19:57<28:31, 26.74s/it] 42%|████▏     | 45/108 [20:22<27:19, 26.02s/it] 43%|████▎     | 46/108 [20:51<27:50, 26.94s/it] 44%|████▎     | 47/108 [21:17<27:17, 26.84s/it] 44%|████▍     | 48/108 [21:42<26:05, 26.09s/it] 45%|████▌     | 49/108 [22:12<27:03, 27.51s/it] 46%|████▋     | 50/108 [22:40<26:34, 27.50s/it] 47%|████▋     | 51/108 [23:06<25:46, 27.13s/it] 48%|████▊     | 52/108 [23:32<25:04, 26.87s/it] 49%|████▉     | 53/108 [24:01<25:08, 27.42s/it] 50%|█████     | 54/108 [24:31<25:20, 28.15s/it] 51%|█████     | 55/108 [24:58<24:36, 27.85s/it] 52%|█████▏    | 56/108 [25:25<23:59, 27.68s/it] 53%|█████▎    | 57/108 [25:54<23:45, 27.95s/it] 54%|█████▎    | 58/108 [26:18<22:21, 26.83s/it] 55%|█████▍    | 59/108 [26:45<21:50, 26.74s/it] 56%|█████▌    | 60/108 [27:16<22:27, 28.08s/it] 56%|█████▋    | 61/108 [27:52<23:49, 30.41s/it] 57%|█████▋    | 62/108 [28:23<23:25, 30.56s/it] 58%|█████▊    | 63/108 [28:51<22:30, 30.02s/it] 59%|█████▉    | 64/108 [29:20<21:41, 29.59s/it] 60%|██████    | 65/108 [29:50<21:16, 29.69s/it] 61%|██████    | 66/108 [30:18<20:27, 29.22s/it] 62%|██████▏   | 67/108 [30:45<19:24, 28.39s/it] 63%|██████▎   | 68/108 [31:11<18:34, 27.86s/it] 64%|██████▍   | 69/108 [31:35<17:20, 26.68s/it] 65%|██████▍   | 70/108 [32:01<16:46, 26.48s/it] 66%|██████▌   | 71/108 [32:26<16:03, 26.03s/it] 67%|██████▋   | 72/108 [32:54<16:00, 26.67s/it] 68%|██████▊   | 73/108 [33:26<16:27, 28.22s/it] 69%|██████▊   | 74/108 [33:52<15:40, 27.65s/it] 69%|██████▉   | 75/108 [34:21<15:17, 27.81s/it] 70%|███████   | 76/108 [34:50<15:06, 28.33s/it] 71%|███████▏  | 77/108 [35:22<15:09, 29.35s/it] 72%|███████▏  | 78/108 [35:45<13:44, 27.48s/it] 73%|███████▎  | 79/108 [36:12<13:15, 27.44s/it] 74%|███████▍  | 80/108 [36:38<12:33, 26.92s/it] 75%|███████▌  | 81/108 [37:01<11:38, 25.86s/it] 76%|███████▌  | 82/108 [37:28<11:21, 26.23s/it] 77%|███████▋  | 83/108 [37:55<10:59, 26.39s/it] 78%|███████▊  | 84/108 [38:21<10:25, 26.06s/it] 79%|███████▊  | 85/108 [38:48<10:07, 26.39s/it] 80%|███████▉  | 86/108 [39:11<09:17, 25.36s/it] 81%|████████  | 87/108 [39:39<09:13, 26.36s/it] 81%|████████▏ | 88/108 [40:05<08:43, 26.17s/it] 82%|████████▏ | 89/108 [40:31<08:16, 26.11s/it] 83%|████████▎ | 90/108 [40:58<07:51, 26.21s/it] 84%|████████▍ | 91/108 [41:20<07:06, 25.10s/it] 85%|████████▌ | 92/108 [41:50<07:06, 26.66s/it] 86%|████████▌ | 93/108 [42:17<06:40, 26.69s/it] 87%|████████▋ | 94/108 [42:43<06:11, 26.52s/it] 88%|████████▊ | 95/108 [43:12<05:52, 27.10s/it] 89%|████████▉ | 96/108 [43:36<05:15, 26.25s/it] 90%|████████▉ | 97/108 [44:04<04:55, 26.82s/it] 91%|█████████ | 98/108 [44:32<04:31, 27.19s/it] 92%|█████████▏| 99/108 [44:58<04:02, 26.92s/it] 93%|█████████▎| 100/108 [45:26<03:37, 27.24s/it] 94%|█████████▎| 101/108 [45:53<03:10, 27.19s/it] 94%|█████████▍| 102/108 [46:21<02:44, 27.40s/it] 95%|█████████▌| 103/108 [46:46<02:12, 26.46s/it] 96%|█████████▋| 104/108 [47:14<01:47, 26.89s/it] 97%|█████████▋| 105/108 [47:43<01:23, 27.79s/it] 98%|█████████▊| 106/108 [48:09<00:54, 27.15s/it] 99%|█████████▉| 107/108 [48:35<00:26, 26.72s/it]100%|██████████| 108/108 [48:51<00:00, 23.43s/it]100%|██████████| 108/108 [48:51<00:00, 27.14s/it]
11/19/2022 01:42:18 - INFO - __main__ -     bleu-4 = 79.57 
11/19/2022 01:42:18 - INFO - __main__ -     xMatch = 13.1243 
11/19/2022 01:42:18 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 13.12 , BLEU: 79.57
CodeBLEU: 80.39
ngram_match_score: 80.39 , weighted_ngram_match_score: 80.19 , syntax_match_score: 82.7 , dataflow_match_score: 79.11
---------------------------------------------------------------------------------------------
on medium dataset, before_refactoring, refactoring type is parameter_renaming:
11/19/2022 01:42:28 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/parameter_renaming/before_refactoring/medium', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/before_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/before_refactoring/medium/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/19/2022 01:42:29 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.bias', 'lm_head.layer_norm.bias', 'lm_head.layer_norm.weight', 'lm_head.decoder.weight', 'lm_head.dense.bias', 'lm_head.dense.weight']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/19/2022 01:42:32 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin
11/19/2022 01:42:36 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/before_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/before_refactoring/medium/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/135 [00:00<?, ?it/s]  1%|          | 1/135 [01:08<2:32:21, 68.22s/it]  1%|▏         | 2/135 [02:17<2:32:14, 68.68s/it]  2%|▏         | 3/135 [03:32<2:37:43, 71.70s/it]  3%|▎         | 4/135 [04:34<2:28:20, 67.94s/it]  4%|▎         | 5/135 [05:47<2:31:12, 69.79s/it]  4%|▍         | 6/135 [06:54<2:27:45, 68.72s/it]  5%|▌         | 7/135 [08:05<2:28:05, 69.42s/it]  6%|▌         | 8/135 [09:15<2:27:17, 69.59s/it]  7%|▋         | 9/135 [10:27<2:27:50, 70.40s/it]  7%|▋         | 10/135 [11:40<2:28:21, 71.21s/it]  8%|▊         | 11/135 [12:49<2:25:31, 70.42s/it]  9%|▉         | 12/135 [13:50<2:18:54, 67.76s/it] 10%|▉         | 13/135 [15:02<2:20:27, 69.08s/it] 10%|█         | 14/135 [16:03<2:14:06, 66.50s/it] 11%|█         | 15/135 [17:09<2:12:38, 66.32s/it] 12%|█▏        | 16/135 [18:08<2:07:29, 64.28s/it] 13%|█▎        | 17/135 [19:20<2:10:50, 66.53s/it] 13%|█▎        | 18/135 [20:20<2:05:47, 64.51s/it] 14%|█▍        | 19/135 [21:23<2:04:08, 64.21s/it] 15%|█▍        | 20/135 [22:16<1:56:28, 60.77s/it] 16%|█▌        | 21/135 [23:10<1:51:21, 58.61s/it] 16%|█▋        | 22/135 [24:08<1:50:14, 58.54s/it] 17%|█▋        | 23/135 [25:07<1:49:34, 58.70s/it] 18%|█▊        | 24/135 [26:11<1:51:16, 60.15s/it] 19%|█▊        | 25/135 [27:14<1:51:44, 60.95s/it] 19%|█▉        | 26/135 [28:08<1:47:09, 58.99s/it] 20%|██        | 27/135 [29:06<1:45:38, 58.69s/it] 21%|██        | 28/135 [30:07<1:46:07, 59.51s/it] 21%|██▏       | 29/135 [31:06<1:44:42, 59.26s/it] 22%|██▏       | 30/135 [32:05<1:43:40, 59.24s/it] 23%|██▎       | 31/135 [33:06<1:43:41, 59.82s/it] 24%|██▎       | 32/135 [34:11<1:45:14, 61.31s/it] 24%|██▍       | 33/135 [35:16<1:45:51, 62.27s/it] 25%|██▌       | 34/135 [36:23<1:47:22, 63.79s/it] 26%|██▌       | 35/135 [37:24<1:44:48, 62.89s/it] 27%|██▋       | 36/135 [38:28<1:44:26, 63.29s/it] 27%|██▋       | 37/135 [39:27<1:41:02, 61.86s/it] 28%|██▊       | 38/135 [40:29<1:40:10, 61.97s/it] 29%|██▉       | 39/135 [41:31<1:39:24, 62.13s/it] 30%|██▉       | 40/135 [42:32<1:37:49, 61.78s/it] 30%|███       | 41/135 [43:38<1:38:42, 63.00s/it] 31%|███       | 42/135 [44:51<1:42:19, 66.02s/it] 32%|███▏      | 43/135 [45:46<1:36:00, 62.61s/it] 33%|███▎      | 44/135 [46:48<1:34:48, 62.51s/it] 33%|███▎      | 45/135 [47:57<1:36:44, 64.49s/it] 34%|███▍      | 46/135 [48:51<1:30:53, 61.27s/it] 35%|███▍      | 47/135 [49:55<1:31:01, 62.06s/it] 36%|███▌      | 48/135 [50:55<1:29:05, 61.45s/it] 36%|███▋      | 49/135 [51:53<1:26:30, 60.36s/it] 37%|███▋      | 50/135 [52:50<1:24:20, 59.54s/it] 38%|███▊      | 51/135 [53:50<1:23:30, 59.65s/it] 39%|███▊      | 52/135 [54:46<1:20:54, 58.48s/it] 39%|███▉      | 53/135 [55:51<1:22:32, 60.39s/it] 40%|████      | 54/135 [56:48<1:20:20, 59.51s/it] 41%|████      | 55/135 [57:51<1:20:44, 60.56s/it] 41%|████▏     | 56/135 [58:55<1:21:09, 61.64s/it] 42%|████▏     | 57/135 [59:57<1:20:06, 61.63s/it] 43%|████▎     | 58/135 [1:00:58<1:18:59, 61.56s/it] 44%|████▎     | 59/135 [1:02:02<1:18:32, 62.00s/it] 44%|████▍     | 60/135 [1:03:09<1:19:38, 63.72s/it] 45%|████▌     | 61/135 [1:04:13<1:18:31, 63.66s/it] 46%|████▌     | 62/135 [1:05:12<1:15:41, 62.22s/it] 47%|████▋     | 63/135 [1:06:20<1:16:57, 64.13s/it] 47%|████▋     | 64/135 [1:07:30<1:17:49, 65.76s/it] 48%|████▊     | 65/135 [1:08:38<1:17:25, 66.37s/it] 49%|████▉     | 66/135 [1:09:39<1:14:45, 65.00s/it] 50%|████▉     | 67/135 [1:10:46<1:14:21, 65.61s/it] 50%|█████     | 68/135 [1:11:46<1:11:19, 63.87s/it] 51%|█████     | 69/135 [1:12:50<1:10:08, 63.76s/it] 52%|█████▏    | 70/135 [1:13:45<1:06:12, 61.12s/it] 53%|█████▎    | 71/135 [1:14:48<1:05:49, 61.72s/it] 53%|█████▎    | 72/135 [1:15:48<1:04:14, 61.18s/it] 54%|█████▍    | 73/135 [1:16:49<1:03:14, 61.20s/it] 55%|█████▍    | 74/135 [1:17:57<1:04:18, 63.25s/it] 56%|█████▌    | 75/135 [1:18:58<1:02:31, 62.53s/it] 56%|█████▋    | 76/135 [1:20:01<1:01:41, 62.73s/it] 57%|█████▋    | 77/135 [1:21:06<1:01:09, 63.27s/it] 58%|█████▊    | 78/135 [1:22:04<58:41, 61.78s/it]   59%|█████▊    | 79/135 [1:23:08<58:22, 62.55s/it] 59%|█████▉    | 80/135 [1:24:10<56:59, 62.17s/it] 60%|██████    | 81/135 [1:25:13<56:16, 62.53s/it] 61%|██████    | 82/135 [1:26:20<56:34, 64.05s/it] 61%|██████▏   | 83/135 [1:27:25<55:36, 64.16s/it] 62%|██████▏   | 84/135 [1:28:32<55:11, 64.94s/it] 63%|██████▎   | 85/135 [1:29:36<53:54, 64.69s/it] 64%|██████▎   | 86/135 [1:30:40<52:37, 64.45s/it] 64%|██████▍   | 87/135 [1:31:36<49:35, 61.99s/it] 65%|██████▌   | 88/135 [1:32:33<47:23, 60.50s/it] 66%|██████▌   | 89/135 [1:33:33<46:11, 60.25s/it] 67%|██████▋   | 90/135 [1:34:29<44:15, 59.02s/it] 67%|██████▋   | 91/135 [1:35:33<44:23, 60.53s/it] 68%|██████▊   | 92/135 [1:36:34<43:33, 60.78s/it] 69%|██████▉   | 93/135 [1:37:35<42:34, 60.82s/it] 70%|██████▉   | 94/135 [1:38:34<41:14, 60.37s/it] 70%|███████   | 95/135 [1:39:43<41:49, 62.73s/it] 71%|███████   | 96/135 [1:40:41<39:59, 61.53s/it] 72%|███████▏  | 97/135 [1:41:43<39:01, 61.62s/it] 73%|███████▎  | 98/135 [1:42:47<38:21, 62.22s/it] 73%|███████▎  | 99/135 [1:43:49<37:21, 62.26s/it] 74%|███████▍  | 100/135 [1:44:46<35:27, 60.77s/it] 75%|███████▍  | 101/135 [1:45:51<35:01, 61.81s/it] 76%|███████▌  | 102/135 [1:46:57<34:39, 63.02s/it] 76%|███████▋  | 103/135 [1:48:02<34:02, 63.83s/it] 77%|███████▋  | 104/135 [1:48:57<31:31, 61.03s/it] 78%|███████▊  | 105/135 [1:49:58<30:36, 61.22s/it] 79%|███████▊  | 106/135 [1:50:59<29:26, 60.91s/it] 79%|███████▉  | 107/135 [1:51:59<28:21, 60.75s/it] 80%|████████  | 108/135 [1:53:05<28:02, 62.31s/it] 81%|████████  | 109/135 [1:54:06<26:49, 61.91s/it] 81%|████████▏ | 110/135 [1:55:08<25:51, 62.07s/it] 82%|████████▏ | 111/135 [1:56:09<24:40, 61.71s/it] 83%|████████▎ | 112/135 [1:57:10<23:33, 61.45s/it] 84%|████████▎ | 113/135 [1:58:16<23:01, 62.79s/it] 84%|████████▍ | 114/135 [1:59:16<21:42, 62.04s/it] 85%|████████▌ | 115/135 [2:00:23<21:09, 63.50s/it] 86%|████████▌ | 116/135 [2:01:22<19:40, 62.11s/it] 87%|████████▋ | 117/135 [2:02:16<17:55, 59.73s/it] 87%|████████▋ | 118/135 [2:03:19<17:11, 60.68s/it] 88%|████████▊ | 119/135 [2:04:28<16:51, 63.21s/it] 89%|████████▉ | 120/135 [2:05:26<15:23, 61.57s/it] 90%|████████▉ | 121/135 [2:06:20<13:51, 59.36s/it] 90%|█████████ | 122/135 [2:07:18<12:44, 58.80s/it] 91%|█████████ | 123/135 [2:08:22<12:07, 60.60s/it] 92%|█████████▏| 124/135 [2:09:27<11:20, 61.84s/it] 93%|█████████▎| 125/135 [2:10:30<10:22, 62.22s/it] 93%|█████████▎| 126/135 [2:11:33<09:22, 62.46s/it] 94%|█████████▍| 127/135 [2:12:36<08:19, 62.48s/it] 95%|█████████▍| 128/135 [2:13:44<07:28, 64.11s/it] 96%|█████████▌| 129/135 [2:14:47<06:22, 63.77s/it] 96%|█████████▋| 130/135 [2:15:51<05:19, 63.91s/it] 97%|█████████▋| 131/135 [2:16:46<04:05, 61.30s/it] 98%|█████████▊| 132/135 [2:17:40<02:57, 59.14s/it] 99%|█████████▊| 133/135 [2:18:42<02:00, 60.03s/it] 99%|█████████▉| 134/135 [2:19:48<01:01, 61.72s/it]100%|██████████| 135/135 [2:20:12<00:00, 50.35s/it]100%|██████████| 135/135 [2:20:12<00:00, 62.31s/it]
11/19/2022 04:02:58 - INFO - __main__ -     bleu-4 = 90.01 
11/19/2022 04:02:58 - INFO - __main__ -     xMatch = 8.5309 
11/19/2022 04:02:58 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 8.53 , BLEU: 90.01
CodeBLEU: 87.67
ngram_match_score: 87.67 , weighted_ngram_match_score: 90.03 , syntax_match_score: 89.59 , dataflow_match_score: 81.06
---------------------------------------------------------------------------------------------
on medium dataset, after_refactoring, refactoring type is parameter_renaming:
11/19/2022 04:03:19 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, beam_size=5, config_name='roberta-base', dev_filename=None, do_eval=False, do_lower_case=False, do_test=True, do_train=False, eval_batch_size=32, eval_steps=-1, gradient_accumulation_steps=1, learning_rate=5e-05, load_model_path='/home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin', local_rank=-1, max_grad_norm=1.0, max_source_length=256, max_steps=-1, max_target_length=256, model_name_or_path='roberta-base', model_type='roberta', no_cuda=False, num_train_epochs=3.0, output_dir='/home/y_shi202/thesis-project/APR-Models-Performance/result/refactoring/codebert/parameter_renaming/after_refactoring/medium', seed=42, test_filename='/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/after_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/after_refactoring/medium/test.buggy-fixed.fixed', tokenizer_name='roberta-base', train_batch_size=8, train_filename=None, train_steps=-1, warmup_steps=0, weight_decay=0.0)
11/19/2022 04:03:21 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
Some weights of the model checkpoint at roberta-base were not used when initializing RobertaModel: ['lm_head.bias', 'lm_head.dense.weight', 'lm_head.layer_norm.weight', 'lm_head.dense.bias', 'lm_head.layer_norm.bias', 'lm_head.decoder.weight']
- This IS expected if you are initializing RobertaModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
11/19/2022 04:03:23 - INFO - __main__ -   reload model from /home/y_shi202/thesis-project/APR-Models-Performance/models/original/codebert/medium/pytorch_model.bin
11/19/2022 04:03:27 - INFO - __main__ -   Test file: /home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/after_refactoring/medium/test.buggy-fixed.buggy,/home/y_shi202/thesis-project/APR-Models-Performance/data/refactoring/parameter_renaming/after_refactoring/medium/test.buggy-fixed.fixed
====================================================================================================
Total parameters : 172503552
====================================================================================================
  0%|          | 0/135 [00:00<?, ?it/s]  1%|          | 1/135 [01:05<2:26:06, 65.42s/it]  1%|▏         | 2/135 [02:10<2:24:20, 65.11s/it]  2%|▏         | 3/135 [03:21<2:28:53, 67.68s/it]  3%|▎         | 4/135 [04:21<2:21:13, 64.68s/it]  4%|▎         | 5/135 [05:30<2:24:07, 66.52s/it]  4%|▍         | 6/135 [06:37<2:22:45, 66.40s/it]  5%|▌         | 7/135 [07:46<2:23:52, 67.44s/it]  6%|▌         | 8/135 [08:54<2:23:13, 67.67s/it]  7%|▋         | 9/135 [10:03<2:22:36, 67.91s/it]  7%|▋         | 10/135 [11:13<2:22:42, 68.50s/it]  8%|▊         | 11/135 [12:19<2:20:08, 67.81s/it]  9%|▉         | 12/135 [13:19<2:13:56, 65.34s/it] 10%|▉         | 13/135 [14:29<2:16:19, 67.04s/it] 10%|█         | 14/135 [15:27<2:09:30, 64.22s/it] 11%|█         | 15/135 [16:33<2:09:20, 64.67s/it] 12%|█▏        | 16/135 [17:36<2:07:03, 64.07s/it] 13%|█▎        | 17/135 [18:50<2:12:15, 67.25s/it] 13%|█▎        | 18/135 [19:54<2:09:05, 66.20s/it] 14%|█▍        | 19/135 [21:01<2:08:29, 66.46s/it] 15%|█▍        | 20/135 [21:56<2:00:43, 62.98s/it] 16%|█▌        | 21/135 [22:52<1:55:59, 61.05s/it] 16%|█▋        | 22/135 [23:54<1:55:09, 61.14s/it] 17%|█▋        | 23/135 [24:56<1:54:50, 61.52s/it] 18%|█▊        | 24/135 [26:05<1:57:41, 63.62s/it] 19%|█▊        | 25/135 [27:09<1:56:53, 63.76s/it] 19%|█▉        | 26/135 [28:06<1:52:09, 61.73s/it] 20%|██        | 27/135 [29:06<1:50:21, 61.31s/it] 21%|██        | 28/135 [30:10<1:50:56, 62.21s/it] 21%|██▏       | 29/135 [31:15<1:51:18, 63.00s/it] 22%|██▏       | 30/135 [32:20<1:50:59, 63.42s/it] 23%|██▎       | 31/135 [33:25<1:50:43, 63.88s/it] 24%|██▎       | 32/135 [34:31<1:50:43, 64.50s/it] 24%|██▍       | 33/135 [35:37<1:50:29, 64.99s/it] 25%|██▌       | 34/135 [36:46<1:51:47, 66.41s/it] 26%|██▌       | 35/135 [37:49<1:48:52, 65.33s/it] 27%|██▋       | 36/135 [38:57<1:48:58, 66.04s/it] 27%|██▋       | 37/135 [39:58<1:45:14, 64.43s/it] 28%|██▊       | 38/135 [41:02<1:44:00, 64.34s/it] 29%|██▉       | 39/135 [42:06<1:42:57, 64.34s/it] 30%|██▉       | 40/135 [43:10<1:41:34, 64.15s/it] 30%|███       | 41/135 [44:18<1:42:22, 65.34s/it] 31%|███       | 42/135 [45:36<1:47:21, 69.26s/it] 32%|███▏      | 43/135 [46:31<1:39:42, 65.03s/it] 33%|███▎      | 44/135 [47:37<1:38:38, 65.04s/it] 33%|███▎      | 45/135 [48:48<1:40:38, 67.10s/it] 34%|███▍      | 46/135 [49:42<1:33:35, 63.10s/it] 35%|███▍      | 47/135 [50:49<1:34:08, 64.19s/it] 36%|███▌      | 48/135 [51:52<1:32:33, 63.84s/it] 36%|███▋      | 49/135 [52:52<1:29:56, 62.75s/it] 37%|███▋      | 50/135 [53:54<1:28:40, 62.60s/it] 38%|███▊      | 51/135 [54:56<1:27:20, 62.38s/it] 39%|███▊      | 52/135 [55:53<1:23:53, 60.64s/it] 39%|███▉      | 53/135 [57:02<1:26:12, 63.08s/it] 40%|████      | 54/135 [58:02<1:24:12, 62.38s/it] 41%|████      | 55/135 [59:07<1:24:06, 63.08s/it] 41%|████▏     | 56/135 [1:00:14<1:24:37, 64.27s/it] 42%|████▏     | 57/135 [1:01:20<1:24:01, 64.64s/it] 43%|████▎     | 58/135 [1:02:22<1:22:13, 64.07s/it] 44%|████▎     | 59/135 [1:03:29<1:22:03, 64.79s/it] 44%|████▍     | 60/135 [1:04:41<1:23:37, 66.91s/it] 45%|████▌     | 61/135 [1:05:45<1:21:21, 65.97s/it] 46%|████▌     | 62/135 [1:06:47<1:19:04, 64.99s/it] 47%|████▋     | 63/135 [1:07:58<1:20:13, 66.85s/it] 47%|████▋     | 64/135 [1:09:11<1:21:02, 68.49s/it] 48%|████▊     | 65/135 [1:10:21<1:20:25, 68.93s/it] 49%|████▉     | 66/135 [1:11:24<1:17:27, 67.35s/it] 50%|████▉     | 67/135 [1:12:34<1:17:03, 67.99s/it] 50%|█████     | 68/135 [1:13:35<1:13:47, 66.08s/it] 51%|█████     | 69/135 [1:14:40<1:12:18, 65.73s/it] 52%|█████▏    | 70/135 [1:15:37<1:08:22, 63.11s/it] 53%|█████▎    | 71/135 [1:16:41<1:07:21, 63.14s/it] 53%|█████▎    | 72/135 [1:17:44<1:06:27, 63.30s/it] 54%|█████▍    | 73/135 [1:18:47<1:05:05, 62.99s/it] 55%|█████▍    | 74/135 [1:19:56<1:06:06, 65.02s/it] 56%|█████▌    | 75/135 [1:20:59<1:04:11, 64.20s/it] 56%|█████▋    | 76/135 [1:22:04<1:03:33, 64.64s/it] 57%|█████▋    | 77/135 [1:23:09<1:02:39, 64.81s/it] 58%|█████▊    | 78/135 [1:24:10<1:00:15, 63.43s/it] 59%|█████▊    | 79/135 [1:25:17<1:00:13, 64.52s/it] 59%|█████▉    | 80/135 [1:26:21<59:09, 64.54s/it]   60%|██████    | 81/135 [1:27:27<58:30, 65.02s/it] 61%|██████    | 82/135 [1:28:38<58:48, 66.58s/it] 61%|██████▏   | 83/135 [1:29:44<57:43, 66.61s/it] 62%|██████▏   | 84/135 [1:30:54<57:23, 67.52s/it] 63%|██████▎   | 85/135 [1:32:01<56:04, 67.29s/it] 64%|██████▎   | 86/135 [1:33:07<54:39, 66.92s/it] 64%|██████▍   | 87/135 [1:34:05<51:28, 64.34s/it] 65%|██████▌   | 88/135 [1:35:04<49:02, 62.61s/it] 66%|██████▌   | 89/135 [1:36:07<48:08, 62.80s/it] 67%|██████▋   | 90/135 [1:37:06<46:21, 61.81s/it] 67%|██████▋   | 91/135 [1:38:12<46:14, 63.05s/it] 68%|██████▊   | 92/135 [1:39:16<45:13, 63.10s/it] 69%|██████▉   | 93/135 [1:40:26<45:45, 65.37s/it] 70%|██████▉   | 94/135 [1:41:33<44:58, 65.81s/it] 70%|███████   | 95/135 [1:42:53<46:41, 70.03s/it] 71%|███████   | 96/135 [1:44:02<45:20, 69.75s/it] 72%|███████▏  | 97/135 [1:45:13<44:28, 70.22s/it] 73%|███████▎  | 98/135 [1:46:26<43:48, 71.03s/it] 73%|███████▎  | 99/135 [1:47:38<42:40, 71.12s/it] 74%|███████▍  | 100/135 [1:48:44<40:43, 69.83s/it] 75%|███████▍  | 101/135 [1:49:58<40:13, 70.98s/it] 76%|███████▌  | 102/135 [1:51:13<39:41, 72.16s/it] 76%|███████▋  | 103/135 [1:52:29<39:03, 73.23s/it] 77%|███████▋  | 104/135 [1:53:34<36:34, 70.78s/it] 78%|███████▊  | 105/135 [1:54:45<35:29, 70.99s/it] 79%|███████▊  | 106/135 [1:55:54<34:00, 70.37s/it] 79%|███████▉  | 107/135 [1:57:04<32:41, 70.07s/it] 80%|████████  | 108/135 [1:58:19<32:16, 71.71s/it] 81%|████████  | 109/135 [1:59:28<30:39, 70.74s/it] 81%|████████▏ | 110/135 [2:00:39<29:33, 70.93s/it] 82%|████████▏ | 111/135 [2:01:49<28:12, 70.51s/it] 83%|████████▎ | 112/135 [2:02:57<26:50, 70.02s/it] 84%|████████▎ | 113/135 [2:04:13<26:18, 71.77s/it] 84%|████████▍ | 114/135 [2:05:17<24:16, 69.36s/it] 85%|████████▌ | 115/135 [2:06:27<23:11, 69.59s/it] 86%|████████▌ | 116/135 [2:07:29<21:19, 67.33s/it] 87%|████████▋ | 117/135 [2:08:25<19:11, 63.95s/it] 87%|████████▋ | 118/135 [2:09:32<18:21, 64.79s/it] 88%|████████▊ | 119/135 [2:10:43<17:48, 66.76s/it] 89%|████████▉ | 120/135 [2:11:44<16:13, 64.91s/it] 90%|████████▉ | 121/135 [2:12:40<14:32, 62.30s/it] 90%|█████████ | 122/135 [2:13:40<13:19, 61.48s/it] 91%|█████████ | 123/135 [2:14:49<12:44, 63.69s/it] 92%|█████████▏| 124/135 [2:15:57<11:56, 65.13s/it] 93%|█████████▎| 125/135 [2:17:02<10:50, 65.04s/it] 93%|█████████▎| 126/135 [2:18:05<09:41, 64.57s/it] 94%|█████████▍| 127/135 [2:19:12<08:41, 65.18s/it] 95%|█████████▍| 128/135 [2:20:28<08:00, 68.58s/it] 96%|█████████▌| 129/135 [2:21:40<06:57, 69.54s/it] 96%|█████████▋| 130/135 [2:22:55<05:54, 70.96s/it] 97%|█████████▋| 131/135 [2:23:59<04:35, 68.87s/it] 98%|█████████▊| 132/135 [2:25:00<03:19, 66.58s/it] 99%|█████████▊| 133/135 [2:26:10<02:15, 67.74s/it] 99%|█████████▉| 134/135 [2:27:25<01:09, 69.92s/it]100%|██████████| 135/135 [2:27:53<00:00, 57.15s/it]100%|██████████| 135/135 [2:27:53<00:00, 65.73s/it]
11/19/2022 06:31:30 - INFO - __main__ -     bleu-4 = 89.59 
11/19/2022 06:31:30 - INFO - __main__ -     xMatch = 5.7415 
11/19/2022 06:31:30 - INFO - __main__ -     ********************
/home/y_shi202/thesis-project/APR-Models-Performance
Accuracy: 5.74 , BLEU: 89.59
CodeBLEU: 87.23
ngram_match_score: 87.23 , weighted_ngram_match_score: 89.63 , syntax_match_score: 89.25 , dataflow_match_score: 80.45
---------------------------------------------------------------------------------------------
######## end ################
